(this.webpackJsonpvocivos=this.webpackJsonpvocivos||[]).push([[0],{53:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),c=r(22),a=r.n(c),i=r(4),l=r(9),o=r(3),u=r.n(o),d=r(5),b=r(2),j=r(12),p=r(21);function h(){return new Worker(r.p+"automation.worker.js")}var x,m,f,O,v=r(11),g=r(40);!function(e){e.Startup="STARTUP"}(x||(x={})),function(e){e.Planet="PLANET",e.Moon="MOON",e.GasGiant="GAS_GIANT",e.Asteroid="ASTEROID",e.Wormhole="WORMHOLE",e.Nebula="NEBULA"}(m||(m={})),function(e){e.BiometricFirearms="BIOMETRIC_FIREARMS",e.Chemicals="CHEMICALS",e.Construction="CONSTRUCTION_MATERIALS",e.Consumer="CONSUMER_GOODS",e.Electronics="ELECTRONICS",e.ExoticPlasma="EXOTIC PLASMA",e.Explosives="EXPLOSIVES",e.Food="FOOD",e.Fuel="FUEL",e.FusionReactors="FUSION_REACTORS",e.Machinery="MACHINERY",e.Metals="METALS",e.Nanobots="NANOTBOTS",e.Narcotics="NARCOTICS",e.PrecisionInstruments="PRECISION_INSTRUMENTS",e.ProteinSynthesizers="PROTEIN_SYNTHESIZERS",e.RareMetals="RARE_METALS",e.Research="RESEARCH",e.ShipParts="SHIP_PARTS",e.ShipPlating="SHIP_PLATING",e.Textiles="TEXTILES",e.UnstableCompounds="UNSTABLE_COMPOUNDS",e.Drones="DRONES"}(f||(f={})),function(e){e.Current="CURRENT",e.Paid="PAID",e.PaidLate="PAID_LATE"}(O||(O={}));var y={user:{credits:0,loans:[],ships:[],username:void 0},account:{token:"",username:""},flightPlans:[],marketData:[],automateAll:!1,systems:[],availableShips:[],spyShips:[]},w=Object(g.b)({name:"spacetraders",initialState:y,reducers:{reset:function(e){Object.assign(e,y)},setUser:function(e,t){var r=t.payload;e.user=r.user},setToken:function(e,t){var r=t.payload;e.account=r},setCredits:function(e,t){var r=t.payload;e.user.credits=r},addLoan:function(e,t){var r=t.payload;e.user.loans.push(r)},updateLoans:function(e,t){var r=t.payload;e.user.loans=r},addShip:function(e,t){var r=t.payload;e.user.ships.push(r)},updateShip:function(e,t){var r=t.payload;Object.assign(e.user.ships.find((function(e){return e.id===r.id})),r)},updateShips:function(e,t){var r=t.payload;e.user.ships=r},addFlightPlan:function(e,t){var r=t.payload;e.flightPlans.push(r);var n=e.user.ships.find((function(e){return e.id===r.shipId}));if(n){n.location=void 0,n.flightPlanId=r.id,n.spaceAvailable+=r.fuelConsumed;var s=n.cargo.find((function(e){return e.good===f.Fuel}));s&&r.fuelRemaining>0?s.quantity=r.fuelRemaining:s&&0===r.fuelRemaining&&n.cargo.splice(n.cargo.findIndex((function(e){return e.good===f.Fuel})),1)}},removeFlightPlan:function(e,t){var r=t.payload;if(e.flightPlans.findIndex((function(e){return e.id===r.id}))>-1){e.flightPlans.splice(e.flightPlans.findIndex((function(e){return e.id===r.id})),1);var n=e.user.ships.find((function(e){return e.id===r.shipId}));n&&(n.location=r.destination,n.flightPlanId=void 0)}},updateMarketData:function(e,t){var r=t.payload;e.marketData.some((function(e){return e.planet.symbol===r.planet.symbol}))?e.marketData=e.marketData.map((function(e){return e.planet.symbol===r.planet.symbol?r:e})):e.marketData.push(r),localStorage.setItem("marketData",JSON.stringify(e.marketData))},updateGoodPriceAfterBuy:function(e,t){var r=t.payload,n=e.marketData.find((function(e){return e.planet.symbol===r.ship.location}));if(n){var s=n.planet.marketplace.find((function(e){return e.symbol===r.order.good}));s&&(s.purchasePricePerUnit=r.order.pricePerUnit)}},updateGoodPriceAfterSell:function(e,t){var r=t.payload,n=e.marketData.find((function(e){return e.planet.symbol===r.ship.location}));if(n){var s=n.planet.marketplace.find((function(e){return e.symbol===r.order.good}));s&&(s.sellPricePerUnit=r.order.pricePerUnit)}},setSystems:function(e,t){var r=t.payload;e.systems=r},setAllAutomationState:function(e,t){var r=t.payload;e.automateAll=r},setAvailableShips:function(e,t){var r=t.payload;e.availableShips=r},updateScrapShip:function(e,t){var r=t.payload;e.user.ships.splice(e.user.ships.findIndex((function(e){return e.id===r.ship.id})),1);var n=parseInt(r.result.replace(/[^0-9]/g,""),10);e.user.credits+=n},setSpyShip:function(e,t){var r=t.payload;e.spyShips.push(r),localStorage.setItem("spyShips",JSON.stringify(e.spyShips))},removeSpyShip:function(e,t){var r=t.payload;e.spyShips.splice(e.spyShips.findIndex((function(e){return e.id===r.id})),1),localStorage.setItem("spyShips",JSON.stringify(e.spyShips))}}}),N=w.actions,k=N.setUser,S=N.setToken,C=N.setCredits,L=N.updateShip,P=N.addFlightPlan,A=N.removeFlightPlan,E=N.updateMarketData,M=N.reset,B=N.addLoan,z=N.addShip,I=N.updateShips,F=N.setSystems,R=N.updateLoans,U=N.setAllAutomationState,T=N.updateGoodPriceAfterBuy,D=N.updateGoodPriceAfterSell,q=N.setAvailableShips,H=N.updateScrapShip,V=N.setSpyShip,W=N.removeSpyShip,_=w.reducer,G=Object(g.a)({reducer:_,preloadedState:void 0}),Y=(r(53),r(19)),J=r(0),K=function(){return Object(J.jsx)(Y.a,{speed:2,width:400,height:60,viewBox:"0 0 400 60",backgroundColor:"#D1D5DB",foregroundColor:"#ecebeb",children:Object(J.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"400",height:"44"})})},Q=function(){return Object(J.jsxs)(Y.a,{speed:2,width:400,height:60,viewBox:"0 0 400 60",backgroundColor:"#374151",foregroundColor:"#4B5563",children:[Object(J.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"200",height:"20"}),Object(J.jsx)("rect",{x:"0",y:"45",rx:"5",ry:"5",width:"100",height:"10"})]})},X=function(){return Object(J.jsx)(Y.a,{speed:2,width:200,height:20,viewBox:"0 0 200 20",backgroundColor:"#374151",foregroundColor:"#4B5563",children:Object(J.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"200",height:"20"})})},Z=function(){return Object(J.jsxs)(Y.a,{speed:2,width:300,height:200,viewBox:"0 0 300 200",backgroundColor:"#374151",foregroundColor:"#4B5563",children:[Object(J.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"100",height:"20"}),Object(J.jsx)("rect",{x:"0",y:"30",rx:"15",ry:"15",width:"250",height:"30"})]})},$=function(){return Object(J.jsxs)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:[Object(J.jsx)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-700",children:Object(J.jsx)(Y.a,{speed:2,width:100,height:20,viewBox:"0 0 100 20",backgroundColor:"#9CA3AF",foregroundColor:"#D1D5DB",children:Object(J.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"100",height:"20"})})}),Object(J.jsx)("div",{className:"text-sm my-3",children:Object(J.jsxs)(Y.a,{speed:2,width:175,height:70,viewBox:"0 0 175 70",backgroundColor:"#9CA3AF",foregroundColor:"#D1D5DB",children:[Object(J.jsx)("rect",{x:"0",y:"0",rx:"7.5",ry:"7.5",width:"125",height:"15"}),Object(J.jsx)("rect",{x:"15",y:"25",rx:"7.5",ry:"7.5",width:"150",height:"15"}),Object(J.jsx)("rect",{x:"15",y:"50",rx:"7.5",ry:"7.5",width:"150",height:"15"})]})})]})},ee=function(){var e=Object(i.c)((function(e){return e.user})),t=Object(i.c)((function(e){return e.account})).token,r=Object(n.useState)(!1),c=Object(b.a)(r,2),a=c[0],o=c[1],u=Object(n.useRef)(null),d=Object(i.b)();Object(n.useEffect)((function(){var e=function(e){null===u.current||u.current.contains(e.target)||o(!1)};return a&&window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[a]);return Object(J.jsxs)("div",{className:"px-8 text-gray-50 w-full min-h-16 bg-gray-900 flex justify-between items-center",children:[Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsxs)("div",{className:"relative mr-1 pt-1",children:[Object(J.jsx)("button",{type:"button",className:"text-gray-50 hover:text-gray-300",onClick:function(){return o(!0)},children:Object(J.jsx)("svg",{className:"mt-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(J.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),a&&Object(J.jsx)("div",{ref:u,className:"origin-top-left absolute left-0 mt-2 w-72 rounded-sm shadow-lg text-gray-700 bg-gray-200 ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:Object(J.jsxs)("div",{className:"py-1",role:"none",children:[Object(J.jsx)("p",{className:"text-gray-900 text-xs px-4 pt-2",children:"Token"}),Object(J.jsx)("p",{className:"text-xs px-4 pt-1",children:t}),Object(J.jsx)("button",{type:"button",className:"block w-full text-left px-4 py-2 mt-2 text-sm hover:bg-gray-300 hover:text-gray-900",role:"menuitem",onClick:function(){d(M()),localStorage.removeItem("apiKey")},children:"Log out"})]})})]}),void 0===e.username?Object(J.jsx)(X,{}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h1",{children:Object(J.jsx)(l.c,{to:"/",className:"text-xl hover:text-yellow-600",children:e.username})}),Object(J.jsxs)("span",{className:"text-xs text-gray-400 ml-4",children:[e.ships.length," ship",1===e.ships.length?"":"s"]}),Object(J.jsxs)("span",{className:"text-xs text-gray-400 ml-4",children:[e.credits.toLocaleString()," credits"]})]})]}),Object(J.jsxs)("div",{className:"flex flex-row divide-x divide-gray-600",children:[Object(J.jsxs)(l.c,{to:"/ships",title:"ships",className:"flex items-center text-sm px-2 hover:text-yellow-600",children:[Object(J.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 mr-1",fill:"currentColor",strokeWidth:1.3,viewBox:"0 0 512.001 512.001",children:[Object(J.jsx)("path",{d:"m226 182.707h60v30h-60z"}),Object(J.jsx)("path",{d:"m482 340.339-95.167-73.476c-25.568-19.74-40.833-50.809-40.833-83.112v-46.044c0-28.454-8.007-56.148-23.156-80.091-14.729-23.279-35.535-42.055-60.168-54.298l-6.676-3.318-6.676 3.318c-24.632 12.243-45.438 31.019-60.168 54.298-15.148 23.943-23.156 51.637-23.156 80.091v46.044c0 32.303-15.265 63.372-40.833 83.112l-95.167 73.476v111.662h106v60h240v-60h106zm-226-306.578c32.849 18.929 54.461 51.693 59.067 88.946h-118.133c4.605-37.254 26.217-70.018 59.066-88.946zm-60 118.946h120v269.294h-120zm90 299.294v30h-60v-30zm-226-96.924 83.5-64.468c8.403-6.488 15.934-13.932 22.5-22.106v153.498h-106zm106 96.924h30v30h-30zm180 30h-30v-30h30zm106-60h-106v-153.498c6.565 8.174 14.096 15.618 22.499 22.106l83.501 64.468z"})]}),Object(J.jsx)("p",{children:"Shipyard"})]}),Object(J.jsxs)(l.c,{to:"/money",title:"loans",className:"flex items-center text-sm px-2 hover:text-yellow-600",children:[Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Object(J.jsx)("p",{children:"Money Manager"})]}),Object(J.jsxs)(l.c,{to:"/markets",title:"Markets",className:"flex items-center text-sm px-2 hover:text-yellow-600",children:[Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Object(J.jsx)("p",{children:"Markets"})]}),Object(J.jsxs)(l.c,{to:"/systems",title:"locations",className:"flex items-center text-sm px-2 hover:text-yellow-600",children:[Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),Object(J.jsx)("p",{children:"Locations"})]})]})]})};function te(){return new Worker(r.p+"api.worker.js")}var re=Object(n.createContext)(void 0),ne=function(e){var t=e.children,r=Object(n.useState)(),s=Object(b.a)(r,2),c=s[0],a=s[1],l=Object(i.b)(),o=localStorage.getItem("apiKey")?JSON.parse(localStorage.getItem("apiKey")):null;return Object(n.useEffect)((function(){var e=Object(p.b)(new te);o?(l(S(o)),new e(o.username,o.token).then((function(e){a([e])}))):(new e).then((function(e){a([e])}))}),[]),Object(J.jsx)(re.Provider,{value:c,children:!!c&&t})},se=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(n.useState)(""),s=Object(b.a)(r,2),c=s[0],a=s[1],l=Object(n.useState)(""),o=Object(b.a)(l,2),j=o[0],p=o[1],h=Object(n.useState)(!1),x=Object(b.a)(h,2),m=x[0],f=x[1],O=Object(n.useState)(!1),v=Object(b.a)(O,2),g=v[0],y=v[1],w=Object(n.useState)(""),N=Object(b.a)(w,2),C=N[0],L=N[1],P=Object(i.b)(),A=Object(n.useState)(!1),E=Object(b.a)(A,2),M=E[0],B=E[1],z=function(){var e=Object(d.a)(u.a.mark((function e(r){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(!0),r.preventDefault(),!m){e.next=21;break}return e.prev=3,e.next=6,t.getToken(c);case 6:return n=e.sent,localStorage.setItem("apiKey",JSON.stringify({username:n.user.username,token:n.token})),P(S({username:n.user.username,token:n.token})),e.next=11,t.setCredentials(c,n.token);case 11:return e.next=13,t.getUser();case 13:s=e.sent,P(k(s)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),B(!1),L(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(!0),r.preventDefault(),!m){e.next=18;break}return e.prev=3,e.next=6,t.setCredentials(c,j);case 6:return e.next=8,t.getUser();case 8:n=e.sent,localStorage.setItem("apiKey",JSON.stringify({username:c,token:j})),P(S({username:c,token:j})),P(k(n)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),B(!1),L(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e,t=null===(e=document.querySelector("form"))||void 0===e?void 0:e.checkValidity();f(t)};return Object(J.jsxs)("div",{className:"bg-gray-800 text-gray-200 w-full h-full flex flex-col items-center justify-center",children:[Object(J.jsx)("h1",{className:"text-4xl",children:"Welcome to Vocivos!"}),Object(J.jsx)("h2",{className:"mb-6",children:"A SpaceTraders API interface"}),C&&Object(J.jsx)("p",{className:"bg-red-300 text-red-800 px-4 py-3 mb-4",children:C}),Object(J.jsx)("div",{className:"flex items-left flex-col",children:g?Object(J.jsxs)("div",{className:"border border-gray-700 rounded p-7 px-10 shadow-lg bg-gray-900",children:[Object(J.jsxs)("form",{className:"mt-2",children:[Object(J.jsx)("div",{children:Object(J.jsx)("input",{type:"text",placeholder:"Username",className:"w-full text-gray-700 py-2 px-2 box-border border border-gray-400 rounded",onChange:function(e){a(e.target.value),F()},required:!0})}),Object(J.jsx)("div",{className:"mt-3",children:Object(J.jsx)("input",{type:"text",placeholder:"Token",className:"w-full text-gray-700 py-2 px-2 box-border border border-gray-400 rounded",onChange:function(e){p(e.target.value),F()}})}),Object(J.jsx)("div",{className:"mt-3",children:Object(J.jsx)("button",{type:"submit",className:"py-2 px-2 w-full text-white bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-default disabled:bg-green-600",disabled:M,onClick:I,children:"Login"})})]}),Object(J.jsxs)("p",{className:"text-sm mt-4 text-center",children:["Need an account? ",Object(J.jsx)("button",{type:"button",className:"text-yellow-500 hover:text-yellow-400",onClick:function(){return y(!1)},children:"Register"})]})]}):Object(J.jsxs)("div",{className:"border border-gray-700 rounded p-7 px-10 shadow-lg bg-gray-900",children:[Object(J.jsxs)("form",{className:"mt-2",children:[Object(J.jsx)("input",{type:"text",placeholder:"Username",className:"w-full text-gray-700 py-2 px-2 box-border border border-gray-400 rounded",onChange:function(e){a(e.target.value),F()},required:!0}),Object(J.jsx)("div",{className:"mt-3",children:Object(J.jsx)("button",{type:"submit",className:"py-2 px-2 w-full text-white bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-default disabled:bg-green-600",disabled:M,onClick:z,children:"Sign Up"})})]}),Object(J.jsxs)("p",{className:"text-sm mt-4 text-center",children:["Already have an account? ",Object(J.jsx)("button",{type:"button",className:"text-yellow-500 hover:text-yellow-400",onClick:function(){return y(!0)},children:"Sign in"})]})]})})]})},ce=r(6),ae=r(59),ie=r(60),le=r(61),oe=r(58),ue=function(e){var t=e.handleClose,r=e.show,c=e.ship,a=Object(n.useContext)(re),l=Object(b.a)(a,1)[0],o=Object(i.c)((function(e){return e.user})).credits,j=Object(i.b)(),p=Object(n.useState)(),h=Object(b.a)(p,2),x=h[0],m=h[1],f=Object(n.useState)(),O=Object(b.a)(f,2),v=O[0],g=O[1],y=Object(n.useState)(0),w=Object(b.a)(y,2),N=w[0],k=w[1],S=Object(n.useState)(!1),P=Object(b.a)(S,2),A=P[0],E=P[1],M=Object(n.useState)(""),B=Object(b.a)(M,2),z=B[0],I=B[1],F=r?"fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900 z-10":"hidden";Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.location){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.getMarket(c.location);case 4:t=e.sent.location.marketplace,m(Object(ce.a)(t).sort((function(e,t){return e.symbol>t.symbol?1:t.symbol>e.symbol?-1:0})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var R=function(){if(!v)return 0;var e=Math.floor(c.spaceAvailable/v.volumePerUnit);return e*v.purchasePricePerUnit<o&&e<=v.quantityAvailable&&e<=300?e:e>v.quantityAvailable&&v.quantityAvailable<=300?v.quantityAvailable:Math.floor(o/v.purchasePricePerUnit)>300?300:Math.floor(o/v.purchasePricePerUnit)},U=function(){var e=Object(d.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,E(!0),e.next=6,l.purchaseOrder(c.id,v.symbol,N);case 6:r=e.sent,j(C(r.credits)),j(L(r.ship)),g(void 0),t(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),I(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:F,children:[Object(J.jsx)("div",{className:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50",onClick:function(){g(void 0),t()}}),Object(J.jsx)("div",{className:"modal-container bg-gray-100 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto min-h-1/3",children:Object(J.jsxs)("div",{className:"modal-content py-4 text-left px-6",children:[Object(J.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Market Buy"}),z&&Object(J.jsx)("p",{className:"py-4 px-2 bg-red-500 text-sm text-gray-100 text-center",children:z}),Object(J.jsxs)("div",{className:"relative",children:[x?Object(J.jsx)("div",{className:"divide-y",children:null===x||void 0===x?void 0:x.map((function(e){return Object(J.jsxs)("div",{className:"py-3 flex justify-between items-center bg-gray-100 w-full ".concat(v?"absolute":""," ").concat((null===v||void 0===v?void 0:v.symbol)===e.symbol?"z-10":""),children:[Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{className:"font-semibold",children:[(t=e.symbol,t.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))," ",Object(J.jsxs)("span",{className:"ml-3 text-sm text-gray-500 font-normal",children:[e.quantityAvailable.toLocaleString()," units available"]})]}),Object(J.jsxs)("p",{className:"text-sm",children:[e.purchasePricePerUnit.toLocaleString()," credit",e.purchasePricePerUnit>1?"s":""," per unit"]})]}),!v&&Object(J.jsx)("div",{children:Object(J.jsx)("button",{type:"button",className:"text-sm bg-blue-500 text-white px-4 py-1 rounded mr-3 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-default disabled:bg-blue-500",onClick:function(){return g(e)},disabled:e.quantityAvailable<=0,children:"Buy"})})]},e.symbol+e.quantityAvailable+e.pricePerUnit+e.volumePerUnit);var t}))}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)(K,{}),Object(J.jsx)(K,{}),Object(J.jsx)(K,{})]}),v&&Object(J.jsxs)("div",{className:"absolute top-20 w-full text-center",children:[Object(J.jsxs)("div",{className:"flex",children:[Object(J.jsx)("input",{type:"number",min:0,max:R(),value:N,placeholder:"Quantity",className:"flex-grow px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none",onChange:function(e){return k(parseInt(e.target.value,10))}}),Object(J.jsx)("button",{type:"button",className:"ml-2 bg-blue-400 text-gray-100 px-3 py-2 rounded hover:bg-blue-500",onClick:function(){return k(R)},children:"Max"})]}),Object(J.jsxs)("button",{type:"button",className:"mt-2 w-full px-3 py-2 bg-green-400 text-white rounded hover:bg-green-500 disabled:opacity-50 disabled:bg-green-400 disabled:cursor-default",disabled:N*v.purchasePricePerUnit<=0||N*v.purchasePricePerUnit>o||A,onClick:U,children:[Object(J.jsxs)("span",{className:A?"hidden":"inline",children:["Purchase for ",(N*v.purchasePricePerUnit).toLocaleString()," credit",N*v.purchasePricePerUnit>1?"s":""]}),Object(J.jsx)("span",{className:A?"inline":"hidden",children:"Please wait..."})]}),Object(J.jsx)("button",{type:"button",className:"text-red-400 mt-3 hover:text-red-500",onClick:function(){g(void 0),I(""),k(0)},children:"Back"})]})]})]})})]})},de=function(e){var t,r,c=e.handleClose,a=e.show,l=e.ship,o=Object(n.useContext)(re),j=Object(b.a)(o,1)[0],p=Object(i.c)((function(e){return e})).systems,h=Object(i.b)(),x=Object(n.useState)(),f=Object(b.a)(x,2),O=f[0],g=f[1],y=Object(n.useState)(),w=Object(b.a)(y,2),N=w[0],k=w[1],S=Object(n.useState)(0),P=Object(b.a)(S,2),A=P[0],E=P[1],M=Object(n.useState)(!1),B=Object(b.a)(M,2),z=B[0],I=B[1],F=Object(n.useState)(""),R=Object(b.a)(F,2),U=R[0],T=R[1],D=a?"fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900 z-10":"hidden";Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.location){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,j.getMarket(l.location);case 5:t=e.sent.location.marketplace,g(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var q=function(){return N?N.quantity<=300?N.quantity:300:0},H=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N){e.next=3;break}return e.abrupt("return");case 3:return I(!0),e.next=6,j.sellOrder(l.id,N.good,A);case 6:t=e.sent,h(C(t.credits)),h(L(t.ship)),k(void 0),c(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),T(e.t0.message),I(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N){e.next=3;break}return e.abrupt("return");case 3:return I(!0),e.next=6,j.deleteOrder(l.id,N.good,A);case 6:return e.sent,e.next=9,j.shipInfo(l.id);case 9:t=e.sent,h(L(t.ship)),k(void 0),c(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),T(e.t0.message),I(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N&&l.location){e.next=3;break}return e.abrupt("return");case 3:return I(!0),e.next=6,j.depositGoods(l.location,l.id,N.good,A);case 6:return e.sent,e.next=9,j.shipInfo(l.id);case 9:t=e.sent,h(L(t.ship)),k(void 0),c(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),T(e.t0.message),I(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),_=function(){if(N&&(null===O||void 0===O?void 0:O.find((function(e){return e.symbol===N.good})))){var e=null===O||void 0===O?void 0:O.find((function(e){return e.symbol===N.good}));return(A*e.sellPricePerUnit).toLocaleString()}return null};return Object(J.jsxs)("div",{className:D,children:[Object(J.jsx)("div",{className:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50",onClick:function(){k(void 0),c()}}),Object(J.jsx)("div",{className:"modal-container bg-gray-100 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto ".concat(N?"min-h-1/3":""),children:Object(J.jsxs)("div",{className:"modal-content py-4 text-left px-6",children:[Object(J.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Your Cargo"}),U&&Object(J.jsx)("p",{className:"py-4 px-2 bg-red-500 text-sm text-gray-100 text-center",children:U}),Object(J.jsxs)("div",{className:"relative",children:[O?Object(J.jsx)("div",{className:"divide-y",children:null===(t=l.cargo)||void 0===t?void 0:t.map((function(e){return Object(J.jsxs)("div",{className:"py-3 flex justify-between items-center bg-gray-100 w-full ".concat(N?"absolute":""," ").concat((null===N||void 0===N?void 0:N.good)===e.good?"z-10":""),children:[Object(J.jsxs)("div",{children:[Object(J.jsxs)("p",{className:"font-semibold",children:[(t=e.good,t.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))," ",Object(J.jsxs)("span",{className:"ml-3 text-sm text-gray-500 font-normal",children:[e.quantity.toLocaleString()," units available"]})]}),(null===O||void 0===O?void 0:O.some((function(t){return t.symbol===e.good})))&&Object(J.jsxs)("p",{className:"text-sm",children:[_()," credits per unit"]})]}),!N&&Object(J.jsx)("div",{children:Object(J.jsx)("button",{type:"button",className:"text-sm bg-blue-500 text-white px-4 py-1 rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-default disabled:bg-blue-500",onClick:function(){return k(e)},children:"Manage"})})]},e.good+e.quantity+e.totalVolume);var t}))}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)(K,{}),Object(J.jsx)(K,{}),Object(J.jsx)(K,{})]}),N&&Object(J.jsxs)("div",{className:"absolute top-20 w-full text-center",children:[Object(J.jsx)("input",{type:"number",min:0,max:N.quantity,value:A,placeholder:"Quantity",className:"w-full flex-grow px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none",onChange:function(e){return E(parseInt(e.target.value,10))}}),Object(J.jsx)("button",{type:"button",className:"text-sm block text-blue-500 hover:text-blue-600",onClick:function(){return E(q)},children:"Set Max Available"}),Object(J.jsx)("div",{children:z?Object(J.jsx)("p",{children:"Please wait..."}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsxs)("button",{type:"button",className:"text-sm mt-2 mr-3 px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50 disabled:bg-red-500 disabled:cursor-default",disabled:A<=0||z,onClick:V,children:["Delete ",A," units"]}),(null===(r=p.find((function(e){var t;return e.symbol===(null===(t=l.location)||void 0===t?void 0:t.split("-")[0])})))||void 0===r?void 0:r.locations.some((function(e){return l.location===e.symbol&&e.type===m.Wormhole})))?Object(J.jsxs)("button",{type:"button",className:"text-sm mt-2 mr-3 px-3 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50 disabled:bg-purple-500 disabled:cursor-default",disabled:A<=0||z,onClick:W,children:["Donate ",A," units"]}):null,Object(J.jsx)("button",{type:"button",className:"text-sm mt-2 px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 disabled:bg-green-500 disabled:cursor-default",disabled:A<=0||z||!_(),onClick:H,children:null!==_()?Object(J.jsxs)("span",{className:z?"hidden":"inline",children:["Sell for ",_()," credits"]}):Object(J.jsx)("span",{children:"Unable to sell"})})]})}),Object(J.jsxs)("button",{type:"button",className:"flex items-center text-sm text-red-400 mt-3 hover:text-red-500",onClick:function(){k(void 0),T(""),E(0)},children:[Object(J.jsx)("svg",{className:"h-3 w-3",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(J.jsx)("path",{fillRule:"evenodd",d:"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]})]})]})]})})]})},be=function(e){var t,r=e.handleClose,c=e.shipError,a=e.show,l=e.ship,o=Object(i.c)((function(e){return e})).systems,j=Object(n.useContext)(re),p=Object(b.a)(j,1)[0],h=Object(i.b)(),x=Object(n.useState)(null===(t=o.find((function(e){var t;return e.symbol===(null===(t=l.location)||void 0===t?void 0:t.split("-")[0])})))||void 0===t?void 0:t.locations),O=Object(b.a)(x,2),g=O[0],y=O[1],w=Object(n.useState)(""),N=Object(b.a)(w,2),k=N[0],S=N[1],A=Object(n.useState)(!0),E=Object(b.a)(A,2),M=E[0],B=E[1],z=a?"fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900 z-10":"hidden";Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.location){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p.getLocations(l.location.split("-")[0]);case 5:t=e.sent.locations,y(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();o&&0!==o.length||e()}),[]);var F=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var s,a,i,o,d,b,j,x,O,v=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!(v.length>2&&void 0!==v[2])||v[2],e.prev=1,t!==m.Wormhole||l.location!==n){e.next=8;break}return e.next=5,p.warpJump(l.id);case 5:a=e.sent.flightPlan,e.next=11;break;case 8:return e.next=10,p.createFlightPlan(l.id,n);case 10:a=e.sent.flightPlan;case 11:h(P(a)),r(),e.next=50;break;case 15:if(e.prev=15,e.t0=e.catch(1),i=e.t0,o=i.message,!(s&&M&&o&&o.startsWith("Ship has insufficient fuel for flight plan"))){e.next=36;break}if(!(d=o.match(/\d+/))){e.next=34;break}return e.prev=21,b=parseInt(d[0],10),e.next=25,p.purchaseOrder(l.id,f.Fuel,b);case 25:j=e.sent,h(C(j.credits)),h(L(j.ship)),F(t,n,!1),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(21),S(e.t1.message);case 34:e.next=50;break;case 36:if(S(o),t!==m.Wormhole){e.next=50;break}return e.prev=38,e.next=41,p.ownedShips();case 41:x=e.sent,O=x.ships,h(I(O)),c(o),e.next=50;break;case 47:e.prev=47,e.t2=e.catch(38),S(e.t2.message);case 50:case"end":return e.stop()}}),e,null,[[1,15],[21,31],[38,47]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:z,children:[Object(J.jsx)("div",{className:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50",onClick:r}),Object(J.jsx)("div",{className:"modal-container bg-gray-100 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto min-h-1/3",children:Object(J.jsxs)("div",{className:"modal-content py-4 text-left px-6",children:[Object(J.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Set Destination"}),Object(J.jsx)("div",{className:"text-sm mb-4",children:Object(J.jsxs)("label",{htmlFor:"autoBuyFuel",className:"flex items-center cursor-pointer",children:[Object(J.jsx)("input",{type:"checkbox",id:"autoBuyFuel",name:"autoBuyFuel",checked:M,onChange:function(e){return B(e.target.checked)}}),Object(J.jsx)("span",{className:"ml-1",children:"Automatically buy required fuel"})]})}),k&&Object(J.jsx)("p",{className:"py-4 px-2 bg-red-500 text-sm text-gray-100 text-center",children:k}),Object(J.jsx)("div",{className:"relative",children:g?Object(J.jsx)("div",{className:"divide-y",children:g.map((function(e){return Object(J.jsxs)("div",{className:"py-2 flex justify-between items-center",children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:e.name}),Object(J.jsx)("p",{className:"text-sm text-gray-500",children:e.symbol})]}),Object(J.jsx)("div",{children:l.location===e.symbol&&e.type!==m.Wormhole?Object(J.jsx)("p",{className:"text-sm text-gray-600 cursor-default",children:"Current location"}):Object(J.jsx)("button",{type:"button",className:"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-default disabled:bg-blue-500",onClick:function(){return F(e.type,e.symbol)},children:e.type===m.Wormhole&&l.location===e.symbol?"Warp":"Travel"})})]},e.symbol+e.name)}))}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)(K,{}),Object(J.jsx)(K,{}),Object(J.jsx)(K,{})]})})]})})]})},je=function(e){var t=e.completed;return Object(J.jsx)("div",{className:"h-0.5 w-full text-right bg-gray-600",children:Object(J.jsx)("div",{className:"h-full text-right bg-green-500 max-w-full",style:{width:"".concat(t,"%"),transition:"width 0.5s ease"},children:Object(J.jsx)("span",{})})})},pe=function(e){var t,r,c,a,l,o,j,p=e.ship,h=e.compact,x=e.shipError,m=Object(n.useContext)(re),O=Object(b.a)(m,1)[0],g=Object(i.c)((function(e){return e.systems})),y=Object(i.c)((function(e){return e.flightPlans.find((function(e){return e.shipId===p.id}))})),w=Object(i.c)((function(e){return e.automateAll})),N=Object(i.c)((function(e){return e.availableShips})),k=Object(i.c)((function(e){return e.automateAll})),S=Object(i.c)((function(e){return e.spyShips.find((function(e){return e.id===p.id}))})),C=Object(n.useState)(!1),L=Object(b.a)(C,2),P=L[0],A=L[1],E=Object(n.useState)(!1),M=Object(b.a)(E,2),B=M[0],z=M[1],I=Object(n.useState)(!1),F=Object(b.a)(I,2),R=F[0],U=F[1],T=Object(n.useState)(),D=Object(b.a)(T,2),q=D[0],_=D[1],G=Object(n.useState)(Date.now()),Y=Object(b.a)(G,2),K=Y[0],Q=Y[1],X=Object(n.useState)(!1),Z=Object(b.a)(X,2),$=Z[0],ee=Z[1],te=Object(i.b)();Object(n.useEffect)((function(){var e=setInterval((function(){return Q(Date.now())}),1e3);return function(){return clearInterval(e)}})),Object(n.useEffect)((function(){y&&_(Object(ie.a)(new Date(y.arrivesAt)))}),[K]);var ne,se=function(){return y?(Date.now()/1e3-(Object(le.a)(new Date(y.arrivesAt))-y.timeRemainingInSeconds))/y.timeRemainingInSeconds*100:0},ce=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.scrapShip(p.id);case 3:t=e.sent.success,te(H({ship:p,result:t})),v.b.success(t,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(J.jsxs)(s.a.Fragment,{children:[P?Object(J.jsx)(ue,{show:P,ship:p,handleClose:function(){return A(!1)}}):null,B?Object(J.jsx)(de,{show:B,ship:p,handleClose:function(){return z(!1)}}):null,R?Object(J.jsx)(be,{show:R,ship:p,handleClose:function(){return U(!1)},shipError:function(e){return x&&x(e)}}):null,h?Object(J.jsxs)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded divide-y divide-gray-500 hover:border-yellow-900 hover:shadow-xl",children:[Object(J.jsxs)("div",{className:"flex justify-between items-center ",children:[Object(J.jsxs)("div",{className:"text-left",children:[Object(J.jsx)("h3",{children:p.type}),Object(J.jsx)("p",{className:"text-xs text-gray-400",children:null!==(t=p.location)&&void 0!==t?t:"In transit"})]}),y&&Object(oe.a)(new Date(y.arrivesAt))||!p.location?Object(J.jsxs)("div",{className:"text-right",children:[Object(J.jsx)("p",{className:"text-xs text-gray-400",children:"In Transit"}),Object(J.jsx)("p",{className:"text-xs text-gray-300",children:q?"Arrives in ".concat(q):"ETA Unknown"})]}):Object(J.jsx)("div",{children:w?Object(J.jsx)("p",{className:"text-sm",children:"Automating"}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("button",{type:"button",title:"Travel",className:"mr-2 w-6 h-6 bg-blue-500 rounded hover:bg-blue-600 disabled:opacity-50 disabled:bg-blue-500 disabled:cursor-default",onClick:function(){return U(!0)},disabled:(ne=p.cargo,!(ne.filter((function(e){return e.good===f.Fuel})).reduce((function(e,t){return e+t.quantity}),0)>0)),children:Object(J.jsx)("p",{className:"text-sm font-bold",children:"T"})}),Object(J.jsx)("button",{type:"button",title:"Buy",className:"mr-2 w-6 h-6 bg-green-500 rounded hover:bg-green-600",onClick:function(){return A(!0)},children:Object(J.jsx)("p",{className:"text-sm font-bold",children:"B"})}),Object(J.jsx)("button",{type:"button",title:"Sell",className:"mr-2 w-6 h-6 bg-red-500 rounded hover:bg-red-600",onClick:function(){return z(!0)},children:Object(J.jsx)("p",{className:"text-sm font-bold",children:"S"})})]})})]}),y&&Object(oe.a)(new Date(y.arrivesAt))||!p.location?Object(J.jsx)("div",{className:"mt-2",children:Object(J.jsx)(je,{completed:se()})}):null]}):Object(J.jsxs)("div",{className:"focus:outline-none bg-gray-900 border border-gray-700 rounded",children:[Object(J.jsxs)("div",{className:"relative flex justify-between items-center p-3 bg-gray-700 border-b border-gray-600",onMouseEnter:function(){return ee(!0)},onMouseLeave:function(){return ee(!1)},children:[Object(J.jsx)("button",{type:"button",className:"absolute top-0 right-0 mt-1.5 mr-1 ".concat($?"block":"hidden"),title:"Scrap ship for ".concat(function(){var e,t=null===(e=N.find((function(e){return e.type===p.type})))||void 0===e?void 0:e.purchaseLocations[0].price;return t?Math.round(.25*t).toLocaleString():"unknown"}()," credits"),onClick:function(){return ce()},disabled:k,children:Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-1 h-4 w-4 text-red-400 hover:text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:Object(J.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})}),Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{className:"flex items-baseline",children:[Object(J.jsx)("h3",{className:"text-xl",children:p.type}),Object(J.jsxs)("div",{className:"flex items-center ml-2 mx-1 text-blue-400 hover:text-blue-500 ".concat($||S?"block":"hidden"),title:S?"Remove spy":"Set as spy",children:[Object(J.jsx)("input",{type:"checkbox",className:"spyShipState opacity-0 absolute h-4 w-4 cursor-pointer",checked:void 0!==S,onChange:function(e){return t=e.target.checked,void te(t?V(p):W(p));var t}}),Object(J.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[Object(J.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),Object(J.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})]})]}),Object(J.jsx)("p",{className:"text-xs text-gray-400",children:p.manufacturer})]}),Object(J.jsx)("div",{className:"flex flex-col",children:Object(J.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-1",children:[Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsx)("div",{className:"w-5 h-5 mr-1",children:Object(J.jsx)("svg",{fill:"#E5E7EB",enableBackground:"new 0 0 512 512",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("path",{d:"m512 358.121c0-68.38-26.629-132.667-74.98-181.02-48.353-48.352-112.64-74.98-181.02-74.98s-132.667 26.629-181.02 74.98c-48.351 48.353-74.98 112.64-74.98 181.02v15h205.016c4.085 12.323 12.371 22.642 23.657 29.305 8.558 5.052 17.953 7.453 27.236 7.453 18.406 0 36.36-9.448 46.376-26.413 1.956-3.313 3.522-6.781 4.717-10.345h204.998zm-235.548 10.093c-6.656 11.276-21.247 15.037-32.526 8.378-5.463-3.225-9.343-8.384-10.925-14.528-1.583-6.144-.679-12.535 2.547-17.998s8.385-9.343 14.528-10.925c1.976-.509 3.977-.76 5.964-.76 4.194 0 8.328 1.12 12.034 3.308 5.463 3.225 9.343 8.384 10.925 14.528 1.583 6.143.679 12.535-2.547 17.997zm31.689-25.093c-.032-.129-.057-.259-.09-.388-2.296-8.916-6.74-16.908-12.887-23.425l43.106-73.015-25.834-15.252-43.106 73.015c-8.675-2.233-17.819-2.264-26.737.032-13.903 3.581-25.58 12.362-32.879 24.726-2.674 4.53-4.636 9.344-5.882 14.307h-173.34c1.992-30.247 9.976-58.88 22.75-84.742l33.311 19.232 15-25.98-33.274-19.21c16.444-24.477 37.541-45.578 62.018-62.022l19.212 33.276 25.98-15-19.236-33.318c25.861-12.774 54.5-20.737 84.746-22.729v38.493h30v-38.493c30.246 1.992 58.885 9.955 84.746 22.729l-19.236 33.318 25.98 15 19.212-33.276c24.477 16.444 45.573 37.545 62.018 62.022l-33.274 19.21 15 25.98 33.311-19.232c12.774 25.862 20.758 54.495 22.75 84.742z"})})}),Object(J.jsx)("p",{children:p.speed})]}),Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsx)("div",{className:"w-4 h-4 mr-1",children:Object(J.jsx)("svg",{fill:"#E5E7EB",enableBackground:"new 0 0 510.192 510.192",viewBox:"0 0 510.192 510.192",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("g",{children:Object(J.jsx)("path",{d:"m510.192 0-122.656 13.628-300.462 300.463-22.694-22.694 33.301-33.3-21.213-21.213-54.514 54.513c10.689 10.689 55.253 55.254 65.86 65.861l-87.814 87.814 65.12 65.12 87.813-87.814c10.633 10.632 55.212 55.211 65.861 65.86l54.513-54.514-21.213-21.213-33.3 33.301-22.694-22.693 300.464-300.463zm-467.766 445.072 22.693-22.694 22.695 22.695-22.694 22.693zm66.602-21.212-22.695-22.695 22.694-22.693 22.694 22.694zm358.881-314.976-293.022 293.022-22.693-22.694 252.835-252.835-21.213-21.213-252.835 252.835-22.694-22.693 293.021-293.023 74.927-8.325z"})})})}),Object(J.jsx)("p",{children:p.weapons})]}),Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsx)("div",{className:"w-4 h-4 mr-1",children:Object(J.jsx)("svg",{fill:"#E5E7EB",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 512 512",children:Object(J.jsx)("g",{children:Object(J.jsx)("path",{d:"M461.144,60.883L260.312,0.633c-2.809-0.844-5.808-0.844-8.62,0L50.858,60.883c-6.345,1.903-10.69,7.743-10.69,14.367 v220.916c0,28.734,11.632,58.148,34.573,87.425c17.522,22.36,41.762,44.813,72.048,66.736 c50.877,36.828,100.975,59.42,103.083,60.363c1.95,0.873,4.039,1.31,6.129,1.31c2.089,0,4.179-0.436,6.129-1.31 c2.108-0.943,52.205-23.535,103.082-60.363c30.285-21.923,54.525-44.376,72.047-66.736c22.941-29.276,34.573-58.69,34.573-87.425 V75.25C471.833,68.626,467.489,62.786,461.144,60.883z M441.833,296.166c0,50.852-51.023,98.534-93.826,129.581 c-38.374,27.833-77.291,47.583-92.005,54.678c-14.714-7.095-53.632-26.845-92.006-54.678 c-42.804-31.047-93.828-78.729-93.828-129.581V86.41l185.833-55.75l185.832,55.75V296.166z"})})})}),Object(J.jsx)("p",{children:p.plating})]})]})})]}),Object(J.jsx)("div",{className:"py-3 px-3 pl-2 border-b border-gray-700 relative",children:y&&Object(oe.a)(new Date(y.arrivesAt))||!p.location?Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsxs)("div",{className:"flex items-center justify-between",children:[Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsxs)("svg",{className:"w-6 h-6 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Object(J.jsxs)("p",{className:"flex items-center mt-0.5",children:[null===(r=g.find((function(e){return e.symbol===(null===y||void 0===y?void 0:y.departure.split("-")[0])})))||void 0===r||null===(c=r.locations.find((function(e){return e.symbol===(null===y||void 0===y?void 0:y.departure)})))||void 0===c?void 0:c.name,Object(J.jsx)("svg",{className:"h-4 w-4 mx-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(J.jsx)("path",{fillRule:"evenodd",d:"M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),null===(a=g.find((function(e){return e.symbol===(null===y||void 0===y?void 0:y.destination.split("-")[0])})))||void 0===a||null===(l=a.locations.find((function(e){return e.symbol===(null===y||void 0===y?void 0:y.destination)})))||void 0===l?void 0:l.name]})]}),Object(J.jsxs)("span",{className:"text-sm text-gray-400 mt-1",children:["(",q?"Arrives in ".concat(q):"ETA Unknown",")"]})]}),w&&Object(J.jsx)("div",{className:"relative z-10 w-full flex items-center justify-end pr-0.5 mt-2",children:Object(J.jsx)("p",{className:"text-xs",children:"Automating"})}),Object(J.jsx)("div",{className:"absolute inset-0",children:Object(J.jsx)("div",{children:Object(J.jsx)(je,{completed:se()})})})]}):Object(J.jsxs)("div",{className:"w-full flex justify-between items-center",children:[Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsxs)("svg",{className:"h-6 w-6 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.3,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Object(J.jsx)("p",{className:"pt-0.5",children:null===(o=g.find((function(e){var t;return e.symbol===(null===(t=p.location)||void 0===t?void 0:t.split("-")[0])})))||void 0===o||null===(j=o.locations.find((function(e){return e.symbol===p.location})))||void 0===j?void 0:j.name}),Object(J.jsxs)("span",{className:"ml-1 pt-1 text-sm text-gray-400",children:["(",p.location,")"]})]}),Object(J.jsx)("div",{children:w?null:Object(J.jsx)(s.a.Fragment,{children:Object(J.jsx)("button",{type:"button",className:"text-xs mr-2 px-2 py-1 bg-blue-500 rounded hover:bg-blue-600 disabled:opacity-50 disabled:bg-blue-500 disabled:cursor-default",onClick:function(){return U(!0)},children:"Travel"})})})]})}),Object(J.jsxs)("div",{className:"p-3",children:[Object(J.jsxs)("div",{className:"flex items-center mb-2",children:[Object(J.jsxs)("p",{className:"mr-3",children:["Cargo ",Object(J.jsxs)("span",{className:"ml-2 text-sm text-gray-400",children:[p.maxCargo-p.spaceAvailable," of ",p.maxCargo]})]}),p.location&&!w&&Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("button",{type:"button",className:"text-xs mr-2 px-2 py-1 bg-green-500 rounded hover:bg-green-600",onClick:function(){return A(!0)},children:"Buy"}),Object(J.jsx)("button",{type:"button",className:"text-xs px-2 py-1 bg-red-500 rounded hover:bg-red-600",onClick:function(){return z(!0)},children:"Sell"})]})]}),Object(J.jsx)("div",{className:"pl-3",children:p.cargo.slice().sort((function(e,t){return e.good>t.good?1:t.good>e.good?-1:0})).map((function(e){return Object(J.jsxs)("p",{className:"text-sm py-0.5",children:[(t=e.good,t.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))," (",e.quantity," units)"]},e.good+e.quantity+e.totalVolume+p.id);var t}))})]})]})]})};pe.defaultProps={compact:!1,shipError:""};var he,xe=pe,me=function(){var e=Object(i.c)((function(e){return e.user})),t=e.username,r=e.loans,n=e.ships,c=Object(i.c)((function(e){return e})).systems;return Object(J.jsx)(s.a.Fragment,{children:void 0===t?Object(J.jsx)(s.a.Fragment,{children:Object(J.jsx)(Z,{})}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("p",{className:"text-gray-400",children:"Welcome"}),Object(J.jsx)("h2",{className:"text-3xl mb-4",children:t}),Object(J.jsxs)("div",{children:[Object(J.jsx)("h3",{className:"text-xl mb-4",children:"Messages"}),c.map((function(e){return e.locations.map((function(e){return e.messages&&e.messages.length>0?Object(J.jsxs)("div",{className:"text-sm p-4 bg-blue-800 text-blue-200 rounded-sm",children:[Object(J.jsx)("p",{children:Object(ce.a)(e.messages).slice(0,-2).join(" ")}),Object(J.jsx)(l.b,{to:"/systems/".concat(e.symbol),className:"underline text-xs mt-1 block",children:"View"})]},e.symbol):null}))}))]}),Object(J.jsxs)("div",{className:"my-4 min-h-1/4",children:[Object(J.jsx)("h3",{className:"text-xl mb-4",children:"Loans"}),Object(J.jsx)("div",{className:"pl-5",children:0===r.filter((function(e){return e.status===O.Current})).length?Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"You have no loans!"}),Object(J.jsx)(l.b,{to:"/money/loans/available",className:"text-sm text-yellow-700 hover:text-blue-600",children:"Get a loan"})]}):Object(J.jsx)("div",{children:r.filter((function(e){return e.status===O.Current})).map((function(e){return Object(J.jsxs)("p",{children:[e.repaymentAmount.toLocaleString()," credits due ",Object(ae.a)(new Date(e.due),{addSuffix:!0})]},e.id)}))})})]}),Object(J.jsxs)("div",{className:"mb-4 min-h-1/4",children:[Object(J.jsx)("h3",{className:"text-xl mb-4",children:"Ships"}),Object(J.jsx)("div",{className:"pl-5 grid grid-cols-5 gap-3",children:0===n.length?Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{children:"You have no ships :("}),Object(J.jsx)(l.b,{to:"/ships/available",className:"text-sm text-yellow-700 hover:text-blue-600",children:"Buy a ship"})]}):Object(ce.a)(n).sort((function(e,t){return e.type>t.type?1:t.type>e.type?-1:0})).map((function(e){return Object(J.jsx)(xe,{ship:e,compact:!0},e.id)}))})]})]})})},fe=r(26),Oe=function(e){var t=e.handleClose,r=e.show,s=e.ship,c=Object(n.useContext)(re),a=Object(b.a)(c,1)[0],l=Object(i.c)((function(e){return e.user})).credits,o=Object(i.b)(),p=Object(j.f)(),h=Object(n.useState)(!1),x=Object(b.a)(h,2),m=x[0],f=x[1],O=r?"fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900":"hidden",g=function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(!0),e.next=6,a.buyShip(t,null===s||void 0===s?void 0:s.type);case 6:r=e.sent,o(C(r.credits)),o(z(r.ship)),p.push("/ships"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e){return m?Object(J.jsx)("div",{}):l>e.price?Object(J.jsx)("button",{type:"button",className:"px-5 py-1 bg-green-500 rounded text-white hover:bg-green-400",onClick:function(){return g(e.location)},children:"Buy"}):Object(J.jsx)("span",{className:"text-xs text-yellow-500",children:"Insufficient credits"})};return Object(J.jsxs)("div",{className:O,children:[Object(J.jsx)("div",{className:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50",onClick:t}),Object(J.jsx)("div",{className:"modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto",children:Object(J.jsxs)("div",{className:"modal-content py-4 text-left px-6",children:[Object(J.jsxs)("h3",{className:"text-xl font-semibold mb-6",children:["Purchase ",null===s||void 0===s?void 0:s.type]}),Object(J.jsxs)("p",{className:"text-sm mb-5",children:["This ship is available in ",null===s||void 0===s?void 0:s.purchaseLocations.length," ",(null===s||void 0===s?void 0:s.purchaseLocations)&&s.purchaseLocations.length>1?"locations":"location",":"]}),Object(J.jsx)("ul",{children:null===s||void 0===s?void 0:s.purchaseLocations.map((function(e){return Object(J.jsxs)("li",{className:"flex justify-between items-center my-3",children:[Object(J.jsxs)("span",{children:[e.location," for ",e.price.toLocaleString()," credits "]}),y(e)]},e.location+e.price)}))}),Object(J.jsx)("div",{className:"flex justify-end pt-2",children:m?Object(J.jsx)("p",{className:"text-sm text-yellow-500 italic",children:"Please Wait..."}):Object(J.jsx)("button",{type:"button",className:"px-4 py-1 text-red-500 text-sm border border-red-500 rounded hover:text-red-400 hover:border-red-400",onClick:t,children:"Close"})})]})})]})},ve=function(){var e=Object(n.useContext)(re),t=(Object(b.a)(e,1)[0],Object(i.c)((function(e){return e}))),r=t.user,c=t.availableShips,a=Object(n.useState)(c),l=Object(b.a)(a,2),o=l[0],u=l[1],d=Object(n.useState)(!1),j=Object(b.a)(d,2),p=j[0],h=j[1],x=Object(n.useState)("class"),m=Object(b.a)(x,2),f=m[0],O=m[1],v=Object(n.useState)(!1),g=Object(b.a)(v,2),y=g[0],w=g[1],N=Object(n.useState)(),k=Object(b.a)(N,2),S=k[0],C=k[1],L=function(e){return e.purchaseLocations.reduce((function(e,t){return e.price<t.price?e:t})).price};return Object(n.useEffect)((function(){!function(e){if(o){var t;switch(e){case"cost":t=p?Object(ce.a)(o).sort((function(e,t){return e.purchaseLocations[0].price>t.purchaseLocations[0].price?1:t.purchaseLocations[0].price>e.purchaseLocations[0].price?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.purchaseLocations[0].price<t.purchaseLocations[0].price?1:t.purchaseLocations[0].price<e.purchaseLocations[0].price?-1:0}));break;case"type":t=p?Object(ce.a)(o).sort((function(e,t){return e.type<t.type?1:t.type<e.type?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.type>t.type?1:t.type>e.type?-1:0}));break;case"manufacturer":t=p?Object(ce.a)(o).sort((function(e,t){return e.manufacturer>t.manufacturer?1:t.manufacturer>e.manufacturer?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.manufacturer<t.manufacturer?1:t.manufacturer<e.manufacturer?-1:0}));break;case"maxCargo":t=p?Object(ce.a)(o).sort((function(e,t){return e.maxCargo>t.maxCargo?1:t.maxCargo>e.maxCargo?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.maxCargo<t.maxCargo?1:t.maxCargo<e.maxCargo?-1:0}));break;case"speed":t=p?Object(ce.a)(o).sort((function(e,t){return e.speed>t.speed?1:t.speed>e.speed?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.speed<t.speed?1:t.speed<e.speed?-1:0}));break;case"plating":t=p?Object(ce.a)(o).sort((function(e,t){return e.plating>t.plating?1:t.plating>e.plating?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.plating<t.plating?1:t.plating<e.plating?-1:0}));break;case"weapons":t=p?Object(ce.a)(o).sort((function(e,t){return e.weapons>t.weapons?1:t.weapons>e.weapons?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.weapons<t.weapons?1:t.weapons<e.weapons?-1:0}));break;default:t=p?Object(ce.a)(o).sort((function(e,t){return e.class>t.class?1:t.class>e.class?-1:0})):Object(ce.a)(o).sort((function(e,t){return e.class<t.class?1:t.class<e.class?-1:0}))}u(t)}}(f)}),[f,p]),Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)(Oe,{show:y,ship:S,handleClose:function(){return w(!1)}}),Object(J.jsx)("h2",{className:"text-3xl mb-5",children:"Purchase Ships"}),Object(J.jsxs)("div",{className:"flex mb-5",children:[Object(J.jsx)("button",{type:"button",className:"cursor-pointer w-6 h-6",onClick:function(){return h(!p)},children:Object(J.jsxs)("svg",Object(fe.a)(Object(fe.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#E5E7EB"},p?{transform:"rotate(180) scale(-1,1)"}:{}),{},{className:"origin-center",children:[Object(J.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(J.jsx)("path",{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"})]}))}),Object(J.jsxs)("select",{name:"sort",id:"sort",className:"appearance-none bg-gray-800 text-gray-200 cursor-pointer",onChange:function(e){return O(e.target.value)},children:[Object(J.jsx)("option",{value:"type",children:"Name"}),Object(J.jsx)("option",{value:"manufacturer",children:"Manufacturer"}),Object(J.jsx)("option",{value:"cost",children:"Cost"}),Object(J.jsx)("option",{value:"maxCargo",children:"Max Cargo"}),Object(J.jsx)("option",{value:"speed",children:"Speed"}),Object(J.jsx)("option",{value:"plating",children:"Plating"}),Object(J.jsx)("option",{value:"weapons",children:"Weapons"})]})]}),Object(J.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[!o&&Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:Object(J.jsx)(Q,{})}),Object(J.jsx)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:Object(J.jsx)(Q,{})}),Object(J.jsx)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:Object(J.jsx)(Q,{})})]}),null===o||void 0===o?void 0:o.map((function(e){return Object(J.jsxs)("button",{type:"button",className:"p-3 bg-gray-900 border border-gray-700 rounded hover:border-yellow-900 hover:shadow-xl",onClick:function(){w(!0),C(e)},children:[Object(J.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[Object(J.jsxs)("div",{className:"text-left",children:[Object(J.jsx)("h3",{children:e.type}),Object(J.jsx)("p",{className:"text-xs text-gray-400",children:e.manufacturer})]}),Object(J.jsxs)("div",{className:"text-right",children:[Object(J.jsxs)("p",{className:"text-xs text-gray-400",children:[e.purchaseLocations.length," location",e.purchaseLocations.length>1?"s":null]}),Object(J.jsxs)("p",{className:"text-sm ".concat(L(e)>r.credits?"text-red-400":""),children:[L(e).toLocaleString()," credits"]})]})]}),Object(J.jsxs)("div",{className:"flex mt-3",children:[Object(J.jsx)("div",{className:"w-6 h-6 mr-3",children:Object(J.jsx)("svg",{version:"1.1",fill:"#E5E7EB",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 485.32 485.32",enableBackground:"new 0 0 485.32 485.32",children:Object(J.jsx)("g",{children:Object(J.jsx)("path",{d:"m480.76,79.05c-0.6-0.2-235-78.3-235-78.3-2.1-1-4.1-1-6.2,0l-231.9,76.3c-5.8,2.4-7.2,7.4-7.2,10.3v313.3c0,5.2 3.1,9.3 7.2,10.3l229,73.2c3.5,1.3 7.3,1.8 12.1,0l228.9-73.2c4.1-2.1 7.2-6.2 7.2-10.3v-313.3c5.68434e-14-3.1-1-6.2-4.1-8.3zm-238.1-56.7l198.9,63.9-75.1,24.1-196-64.5 72.2-23.5zm-10.3,438l-211.3-67v-291.4l211.3,67.6v290.8zm10.3-310.2l-198.9-62.8 93.7-30.6 195.3,64.5-90.1,28.9zm10.3,310.2v-291.6l105.1-33.3v32.3l20.6-8.8v-30l85.5-27v290.4h0.1l-211.3,68z"})})})}),Object(J.jsx)("p",{children:e.maxCargo})]}),Object(J.jsxs)("div",{className:"flex mt-3",children:[Object(J.jsx)("div",{className:"w-6 h-6 mr-3",children:Object(J.jsx)("svg",{fill:"#E5E7EB",enableBackground:"new 0 0 512 512",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("path",{d:"m512 358.121c0-68.38-26.629-132.667-74.98-181.02-48.353-48.352-112.64-74.98-181.02-74.98s-132.667 26.629-181.02 74.98c-48.351 48.353-74.98 112.64-74.98 181.02v15h205.016c4.085 12.323 12.371 22.642 23.657 29.305 8.558 5.052 17.953 7.453 27.236 7.453 18.406 0 36.36-9.448 46.376-26.413 1.956-3.313 3.522-6.781 4.717-10.345h204.998zm-235.548 10.093c-6.656 11.276-21.247 15.037-32.526 8.378-5.463-3.225-9.343-8.384-10.925-14.528-1.583-6.144-.679-12.535 2.547-17.998s8.385-9.343 14.528-10.925c1.976-.509 3.977-.76 5.964-.76 4.194 0 8.328 1.12 12.034 3.308 5.463 3.225 9.343 8.384 10.925 14.528 1.583 6.143.679 12.535-2.547 17.997zm31.689-25.093c-.032-.129-.057-.259-.09-.388-2.296-8.916-6.74-16.908-12.887-23.425l43.106-73.015-25.834-15.252-43.106 73.015c-8.675-2.233-17.819-2.264-26.737.032-13.903 3.581-25.58 12.362-32.879 24.726-2.674 4.53-4.636 9.344-5.882 14.307h-173.34c1.992-30.247 9.976-58.88 22.75-84.742l33.311 19.232 15-25.98-33.274-19.21c16.444-24.477 37.541-45.578 62.018-62.022l19.212 33.276 25.98-15-19.236-33.318c25.861-12.774 54.5-20.737 84.746-22.729v38.493h30v-38.493c30.246 1.992 58.885 9.955 84.746 22.729l-19.236 33.318 25.98 15 19.212-33.276c24.477 16.444 45.573 37.545 62.018 62.022l-33.274 19.21 15 25.98 33.311-19.232c12.774 25.862 20.758 54.495 22.75 84.742z"})})}),Object(J.jsx)("p",{children:e.speed})]}),Object(J.jsxs)("div",{className:"flex mt-3",children:[Object(J.jsx)("div",{className:"w-6 h-6 mr-3",children:Object(J.jsx)("svg",{version:"1.1",fill:"#E5E7EB",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 512 512",children:Object(J.jsx)("g",{children:Object(J.jsx)("path",{d:"M461.144,60.883L260.312,0.633c-2.809-0.844-5.808-0.844-8.62,0L50.858,60.883c-6.345,1.903-10.69,7.743-10.69,14.367 v220.916c0,28.734,11.632,58.148,34.573,87.425c17.522,22.36,41.762,44.813,72.048,66.736 c50.877,36.828,100.975,59.42,103.083,60.363c1.95,0.873,4.039,1.31,6.129,1.31c2.089,0,4.179-0.436,6.129-1.31 c2.108-0.943,52.205-23.535,103.082-60.363c30.285-21.923,54.525-44.376,72.047-66.736c22.941-29.276,34.573-58.69,34.573-87.425 V75.25C471.833,68.626,467.489,62.786,461.144,60.883z M441.833,296.166c0,50.852-51.023,98.534-93.826,129.581 c-38.374,27.833-77.291,47.583-92.005,54.678c-14.714-7.095-53.632-26.845-92.006-54.678 c-42.804-31.047-93.828-78.729-93.828-129.581V86.41l185.833-55.75l185.832,55.75V296.166z"})})})}),Object(J.jsx)("p",{children:e.plating})]}),Object(J.jsxs)("div",{className:"flex mt-3",children:[Object(J.jsx)("div",{className:"w-6 h-6 mr-3",children:Object(J.jsx)("svg",{fill:"#E5E7EB",enableBackground:"new 0 0 510.192 510.192",viewBox:"0 0 510.192 510.192",xmlns:"http://www.w3.org/2000/svg",children:Object(J.jsx)("g",{children:Object(J.jsx)("path",{d:"m510.192 0-122.656 13.628-300.462 300.463-22.694-22.694 33.301-33.3-21.213-21.213-54.514 54.513c10.689 10.689 55.253 55.254 65.86 65.861l-87.814 87.814 65.12 65.12 87.813-87.814c10.633 10.632 55.212 55.211 65.861 65.86l54.513-54.514-21.213-21.213-33.3 33.301-22.694-22.693 300.464-300.463zm-467.766 445.072 22.693-22.694 22.695 22.695-22.694 22.693zm66.602-21.212-22.695-22.695 22.694-22.693 22.694 22.694zm358.881-314.976-293.022 293.022-22.693-22.694 252.835-252.835-21.213-21.213-252.835 252.835-22.694-22.693 293.021-293.023 74.927-8.325z"})})})}),Object(J.jsx)("p",{children:e.weapons})]})]},e.class+e.speed+e.manufacturer+e.maxCargo)}))]})]})},ge=r(43),ye=r.n(ge),we=function(e){var t,r=e.sortOrder,s=e.sortType,c=e.system,a=e.ships,l=e.setShipError,o=Object(i.c)((function(e){return e})).systems,u=Object(n.useState)("auto"),d=Object(b.a)(u,2),j=d[0],p=d[1];return Object(J.jsxs)("div",{className:"mb-10",children:[Object(J.jsxs)("button",{type:"button",className:"flex items-center border-b border-gray-600 pb-2 mb-4",onClick:function(){p(0===j?"auto":0)},children:[Object(J.jsx)("span",{className:"mr-2 mt-0.5 ".concat("auto"===j?"arrow-down":"arrow-up")}),Object(J.jsxs)("h3",{className:"text-xl",children:[null===(t=o.find((function(e){return e.symbol===c})))||void 0===t?void 0:t.name," (",a.length,")"]})]}),Object(J.jsx)(ye.a,{id:"locations-".concat(c),className:"locations-".concat(c),duration:250,height:j,children:Object(J.jsx)("div",{className:"grid grid-cols-4 gap-4",children:function(e){switch(s){case"class":return Object(ce.a)(e).sort((function(e,t){return r?t.class.localeCompare(e.class):e.class.localeCompare(t.class)}));case"type":return Object(ce.a)(e).sort((function(e,t){return r?t.type.localeCompare(e.type):e.type.localeCompare(t.type)}));case"manufacturer":return Object(ce.a)(e).sort((function(e,t){return r?e.manufacturer.localeCompare(t.manufacturer):t.manufacturer.localeCompare(e.manufacturer)}));case"maxCargo":return r?Object(ce.a)(e).sort((function(e,t){return e.maxCargo>t.maxCargo?1:t.maxCargo>e.maxCargo?-1:0})):Object(ce.a)(e).sort((function(e,t){return e.maxCargo<t.maxCargo?1:t.maxCargo<e.maxCargo?-1:0}));case"speed":return r?Object(ce.a)(e).sort((function(e,t){return e.speed>t.speed?1:t.speed>e.speed?-1:0})):Object(ce.a)(e).sort((function(e,t){return e.speed<t.speed?1:t.speed<e.speed?-1:0}));case"plating":return r?Object(ce.a)(e).sort((function(e,t){return e.plating>t.plating?1:t.plating>e.plating?-1:0})):Object(ce.a)(e).sort((function(e,t){return e.plating<t.plating?1:t.plating<e.plating?-1:0}));case"weaponse":return r?Object(ce.a)(e).sort((function(e,t){return e.weapons>t.weapons?1:t.weapons>e.weapons?-1:0})):Object(ce.a)(e).sort((function(e,t){return e.weapons<t.weapons?1:t.weapons<e.weapons?-1:0}));default:return e}}(a).map((function(e){return Object(J.jsx)(xe,{ship:e,shipError:function(e){return l(e)}},e.id)}))})})]})},Ne=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(i.c)((function(e){return e.user})).ships,c=Object(i.c)((function(e){return e})),a=c.flightPlans,l=c.automateAll,o=c.systems,j=Object(n.useState)(),p=Object(b.a)(j,2),h=p[0],x=p[1],O=Object(n.useState)(!1),g=Object(b.a)(O,2),y=g[0],w=g[1],N=Object(n.useState)("type"),k=Object(b.a)(N,2),S=k[0],P=k[1],A=Object(n.useState)(""),E=Object(b.a)(A,2),M=E[0],B=E[1],z=Object(i.b)();function I(){return(I=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(U(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){var e={};r.forEach((function(t){if(t.location)e[t.location.split("-")[0]]||(e[t.location.split("-")[0]]=[]),e[t.location.split("-")[0]].push(t);else if(t.flightPlanId||a.some((function(e){return e.shipId===t.id}))){var r,n=null===(r=a.find((function(e){return e.shipId===t.id})))||void 0===r?void 0:r.destination.split("-")[0];(e[n]=e[n]||[]).push(t)}else(e.UNKNOWN=e.UNKNOWN||[]).push(t)}));var t=Object.keys(e).sort().reduce((function(t,r){return t[r]=e[r],t}),{});x(t)}),[r,a]);var F=function(){return!l&&r.some((function(e){var t,r;return(null===(t=o.find((function(t){var r;return t.symbol===(null===(r=e.location)||void 0===r?void 0:r.split("-")[0])})))||void 0===t||null===(r=t.locations.find((function(t){return t.symbol===e.location})))||void 0===r?void 0:r.type)!==m.Wormhole&&e.cargo.some((function(e){return e.good!==f.Fuel}))}))};return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h2",{className:"text-3xl mb-5",children:"Your Ships"}),""!==M&&Object(J.jsxs)("div",{className:"flex justify-between items-center text-sm py-3 px-2 bg-red-400 text-red-900 mb-5",children:[Object(J.jsx)("p",{children:M}),Object(J.jsx)("button",{className:"w-4 h-4 hover:text-red-700",type:"button",onClick:function(){return B("")},children:Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Object(J.jsxs)("div",{className:"mb-5 flex items-center",children:[Object(J.jsx)("button",{type:"button",className:"text-sm cursor-pointer mr-2 p-2 rounded ".concat(l?"bg-red-500 hover:bg-red-600 disabled:bg-red-500":"bg-green-600 hover:bg-green-700 disabled:bg-green-600"," disabled:opacity-50 disabled:cursor-default"),title:F()?"All ships must have no cargo to begin automation":"",onClick:function(){return function(e){return I.apply(this,arguments)}(!l)},disabled:F(),children:l?"Stop Automation":"Automate All"}),Object(J.jsx)("button",{type:"button",className:"text-sm cursor-pointer mr-2 p-2 rounded bg-blue-500 hover:bg-blue-600 disabled:bg-blue-500 disabled:opacity-50 disabled:cursor-default",onClick:function(){r.forEach((function(e){e.cargo.forEach(function(){var r=Object(d.a)(u.a.mark((function r(n){var s,c,a;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.good===f.Fuel){r.next=25;break}if(r.prev=1,!(n.quantity>500)){r.next=15;break}s=n.quantity;case 4:if(!(s>0)){r.next=13;break}return r.next=7,t.sellOrder(e.id,n.good,s>500?500:s);case 7:c=r.sent,z(C(c.credits)),z(L(c.ship)),s-=500,r.next=4;break;case 13:r.next=20;break;case 15:return r.next=17,t.sellOrder(e.id,n.good,n.quantity);case 17:a=r.sent,z(C(a.credits)),z(L(a.ship));case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(1),v.b.error(r.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 25:case"end":return r.stop()}}),r,null,[[1,22]])})));return function(e){return r.apply(this,arguments)}}())}))},disabled:l||!l&&r.some((function(e){return e.flightPlanId}))||!l&&!r.some((function(e){return e.cargo.some((function(e){return e.good!==f.Fuel}))})),children:"Sell All Cargo"})]}),Object(J.jsxs)("div",{className:"flex mb-5",children:[Object(J.jsx)("button",{type:"button",className:"cursor-pointer w-6 h-6",onClick:function(){return w(!y)},children:Object(J.jsxs)("svg",Object(fe.a)(Object(fe.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#E5E7EB"},y?{transform:"rotate(180) scale(-1,1)"}:{}),{},{className:"origin-center",children:[Object(J.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(J.jsx)("path",{d:"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"})]}))}),Object(J.jsxs)("select",{name:"sort",id:"sort",className:"appearance-none bg-gray-800 text-gray-200 cursor-pointer",onChange:function(e){return P(e.target.value)},children:[Object(J.jsx)("option",{value:"type",children:"Name"}),Object(J.jsx)("option",{value:"manufacturer",children:"Manufacturer"}),Object(J.jsx)("option",{value:"cost",children:"Cost"}),Object(J.jsx)("option",{value:"maxCargo",children:"Max Cargo"}),Object(J.jsx)("option",{value:"speed",children:"Speed"}),Object(J.jsx)("option",{value:"plating",children:"Plating"}),Object(J.jsx)("option",{value:"weapons",children:"Weapons"})]})]}),Object(J.jsx)("div",{children:h&&Object.keys(h).map((function(e){return Object(J.jsx)(we,{system:e,ships:h[e],sortOrder:y,sortType:S,setShipError:B},e)}))})]})},ke=function(){return Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{className:"text-sm mb-5",children:[Object(J.jsx)(l.c,{exact:!0,to:"/ships",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Owned"}),Object(J.jsx)(l.c,{exact:!0,to:"/ships/available",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Purchase"})]}),Object(J.jsxs)(j.c,{children:[Object(J.jsx)(j.a,{exact:!0,path:"/ships",component:Ne}),Object(J.jsx)(j.a,{path:"/ships/available",component:ve})]})]})},Se=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(i.c)((function(e){return e.systems})),c=Object(i.b)(),a=Object(n.useState)([]),o=Object(b.a)(a,2),j=o[0],p=o[1],h=Object(i.c)((function(e){return e.availableShips}));Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=11;break}return e.prev=1,e.next=4,t.systemsInfo();case 4:n=e.sent.systems,c(F(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e=[];r.forEach((function(t){var r={symbol:t.symbol,name:t.name,locations:[]};e.push(r),t.locations.forEach((function(e){var t;e.type!==m.Moon?r.locations.push({parent:e,satellites:[]}):null===(t=r.locations.find((function(t){return t.parent.symbol==="".concat(e.symbol.split("-")[0],"-").concat(e.symbol.split("-")[1])})))||void 0===t||t.satellites.push(e)}))})),p(e)}),[r]);var x=function(e){return h.some((function(t){return t.purchaseLocations.some((function(t){return t.location===e}))}))};return j&&Object(J.jsx)(s.a.Fragment,{children:Object(J.jsx)("div",{className:"grid gap-3 grid-cols-4 mt-4",children:j.map((function(e){return Object(J.jsxs)("div",{children:[Object(J.jsx)("h2",{className:"text-3xl",children:e.name}),Object(J.jsx)("ul",{className:"mt-3 pl-5",children:e.locations.map((function(e){return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsxs)("li",{className:"py-1 w-max",children:[Object(J.jsx)(l.b,{className:"underline hover:text-yellow-600",to:"systems/".concat(e.parent.symbol),children:e.parent.name}),e.parent.structures&&e.parent.structures.length>0?Object(J.jsxs)("span",{className:"text-sm",children:[" (",e.parent.structures.length," structure",e.parent.structures.length>1?"s":"",")"]}):"",x(e.parent.symbol)?Object(J.jsx)("span",{title:"Has a shipyard",children:Object(J.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 mb-0.5 ml-2 inline",fill:"currentColor",strokeWidth:1.1,viewBox:"0 0 512.001 512.001",children:[Object(J.jsx)("path",{d:"m226 182.707h60v30h-60z"}),Object(J.jsx)("path",{d:"m482 340.339-95.167-73.476c-25.568-19.74-40.833-50.809-40.833-83.112v-46.044c0-28.454-8.007-56.148-23.156-80.091-14.729-23.279-35.535-42.055-60.168-54.298l-6.676-3.318-6.676 3.318c-24.632 12.243-45.438 31.019-60.168 54.298-15.148 23.943-23.156 51.637-23.156 80.091v46.044c0 32.303-15.265 63.372-40.833 83.112l-95.167 73.476v111.662h106v60h240v-60h106zm-226-306.578c32.849 18.929 54.461 51.693 59.067 88.946h-118.133c4.605-37.254 26.217-70.018 59.066-88.946zm-60 118.946h120v269.294h-120zm90 299.294v30h-60v-30zm-226-96.924 83.5-64.468c8.403-6.488 15.934-13.932 22.5-22.106v153.498h-106zm106 96.924h30v30h-30zm180 30h-30v-30h30zm106-60h-106v-153.498c6.565 8.174 14.096 15.618 22.499 22.106l83.501 64.468z"})]})}):null]}),e.satellites.length>0&&Object(J.jsx)("ul",{className:"pl-5",children:e.satellites.map((function(e){return Object(J.jsxs)("li",{className:"py-1 w-max",children:[Object(J.jsx)(l.b,{className:"underline hover:text-yellow-600",to:"systems/".concat(e.symbol),children:e.name}),e.structures&&e.structures.length>0?Object(J.jsxs)("span",{className:"text-sm",children:[" (",e.structures.length," structure",e.structures.length>1?"s":"",")"]}):"",x(e.symbol)?Object(J.jsx)("span",{title:"Has a shipyard",children:Object(J.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 mb-0.5 ml-2 inline",fill:"currentColor",strokeWidth:1.1,viewBox:"0 0 512.001 512.001",children:[Object(J.jsx)("path",{d:"m226 182.707h60v30h-60z"}),Object(J.jsx)("path",{d:"m482 340.339-95.167-73.476c-25.568-19.74-40.833-50.809-40.833-83.112v-46.044c0-28.454-8.007-56.148-23.156-80.091-14.729-23.279-35.535-42.055-60.168-54.298l-6.676-3.318-6.676 3.318c-24.632 12.243-45.438 31.019-60.168 54.298-15.148 23.943-23.156 51.637-23.156 80.091v46.044c0 32.303-15.265 63.372-40.833 83.112l-95.167 73.476v111.662h106v60h240v-60h106zm-226-306.578c32.849 18.929 54.461 51.693 59.067 88.946h-118.133c4.605-37.254 26.217-70.018 59.066-88.946zm-60 118.946h120v269.294h-120zm90 299.294v30h-60v-30zm-226-96.924 83.5-64.468c8.403-6.488 15.934-13.932 22.5-22.106v153.498h-106zm106 96.924h30v30h-30zm180 30h-30v-30h30zm106-60h-106v-153.498c6.565 8.174 14.096 15.618 22.499 22.106l83.501 64.468z"})]})}):null]},e.symbol)}))})]},e.parent.symbol)}))})]},e.symbol)}))})})},Ce=function(){return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsxs)("div",{className:"text-sm mb-5",children:[Object(J.jsx)(l.c,{exact:!0,to:"/systems",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Systems"}),Object(J.jsx)(l.c,{exact:!0,to:"/structures",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Structures"})]}),Object(J.jsx)("div",{className:"h-1/4",children:Object(J.jsx)(j.a,{exact:!0,path:"/systems",component:Se})})]})},Le=function(){var e,t=Object(j.f)(),r=Object(n.useContext)(re),c=Object(b.a)(r,1)[0],a=Object(j.g)().location,i=Object(n.useState)(),l=Object(b.a)(i,2),o=l[0],p=l[1],h=Object(n.useState)(),x=Object(b.a)(h,2),m=(x[0],x[1]);Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getLocation(a);case 3:t=e.sent,p(t.location),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsxs)("div",{className:"mb-4",children:[Object(J.jsxs)("button",{type:"button",className:"flex items-center text-sm mb-3 hover:text-yellow-600",onClick:function(){return t.goBack()},children:[Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]}),Object(J.jsx)("h2",{className:"text-3xl",children:null===o||void 0===o?void 0:o.name}),Object(J.jsxs)("h3",{children:["(",a,")"]})]}),(null===o||void 0===o?void 0:o.messages)&&Object(J.jsx)("div",{className:"text-sm mb-4 p-4 bg-blue-800 text-blue-200 rounded-sm",children:Object(J.jsx)("p",{children:Object(ce.a)(o.messages).slice(0,-2).join(" ")})}),(null===o||void 0===o?void 0:o.structures)&&Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("p",{className:"mb-2 text-lg border-b border-gray-500 w-max",children:"Structures"}),null===o||void 0===o||null===(e=o.structures)||void 0===e?void 0:e.map((function(e){return Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsx)("p",{children:(t=e.type,t.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))},e.id),e.ownedBy&&Object(J.jsxs)("span",{className:"text-sm ml-3",children:["(Owner: ",e.ownedBy.username,")"]})]});var t}))]})]})},Pe=function(e){var t=e.handleClose,r=e.show,c=e.loan,a=Object(n.useContext)(re),l=Object(b.a)(a,1)[0],o=Object(j.f)(),p=Object(i.b)(),h=Object(n.useState)(!1),m=Object(b.a)(h,2),f=m[0],O=m[1],v=Object(n.useState)(""),g=Object(b.a)(v,2),y=g[0],w=g[1],N=r?"fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900":"hidden";Object(n.useEffect)((function(){O(!1),w("")}),[c]);var k=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,l.newLoan(x.Startup);case 4:t=e.sent,p(C(t.credits)),p(B(t.loan)),o.push("/loans"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),O(!1),w(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(J.jsxs)("div",{className:N,children:[Object(J.jsx)("div",{className:"modal-overlay absolute w-full h-full bg-gray-900 opacity-50",onClick:t}),Object(J.jsx)("div",{className:"modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto",children:Object(J.jsxs)("div",{className:"modal-content py-4 text-left px-6",children:[Object(J.jsx)("h3",{className:"text-xl font-semibold mb-6",children:"Request the following loan"}),Object(J.jsxs)("div",{className:"mb-4",children:[Object(J.jsx)("p",{className:"text-sm text-gray-500",children:"Loan amount"}),Object(J.jsxs)("p",{children:[null===c||void 0===c?void 0:c.amount.toLocaleString()," credits"]})]}),Object(J.jsxs)("div",{className:"mb-4",children:[Object(J.jsx)("p",{className:"text-sm text-gray-500",children:"Repayment Due"}),Object(J.jsxs)("p",{children:[null===c||void 0===c?void 0:c.termInDays," day",c&&(null===c||void 0===c?void 0:c.termInDays)>1?"s":""]})]}),Object(J.jsxs)("div",{className:"mb-4",children:[Object(J.jsx)("p",{className:"text-sm text-gray-500",children:"Repayment Amount"}),Object(J.jsxs)("p",{children:[c&&(c.amount+c.amount*(c.rate/100)).toLocaleString()," "," credits"]})]}),y&&Object(J.jsx)("div",{className:"bg-red-300 text-red-800 px-4 py-3 mb-4 text-center",children:Object(J.jsx)("p",{children:y})}),Object(J.jsx)("div",{className:"flex justify-end pt-2",children:f?Object(J.jsx)("p",{className:"text-sm text-yellow-500 italic",children:"Please Wait..."}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("button",{type:"button",className:"px-4 py-2 text-red-500 text-sm rounded mr-4 hover:text-red-400",onClick:t,children:"Close"}),Object(J.jsx)("button",{type:"button",className:"w-1/4 px-4 py-2 text-white text-sm bg-green-500 rounded hover:bg-green-400 disabled:opacity-50 disabled:cursor-default disabled:bg-green-500",disabled:f||y.length>0,onClick:k,children:"Get Loan"})]})})]})})]})},Ae=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(n.useState)(),c=Object(b.a)(r,2),a=c[0],i=c[1],l=Object(n.useState)(!1),o=Object(b.a)(l,2),j=o[0],p=o[1],h=Object(n.useState)(),x=Object(b.a)(h,2),m=x[0],f=x[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=i,e.next=4,t.getLoansAvailable();case 4:e.t1=e.sent.loans,(0,e.t0)(e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e.catch(0),v.b.error(e.t2.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)(Pe,{show:j,loan:m,handleClose:function(){p(!1),f(void 0)}}),Object(J.jsx)("h2",{className:"text-3xl mb-5",children:"Available Loans"}),Object(J.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[!a&&Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:Object(J.jsx)(Q,{})}),Object(J.jsx)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:Object(J.jsx)(Q,{})}),Object(J.jsx)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:Object(J.jsx)(Q,{})})]}),null===a||void 0===a?void 0:a.map((function(e){return Object(J.jsxs)("button",{type:"button",className:"p-3 bg-gray-900 border border-gray-700 rounded text-left hover:border-yellow-900 hover:shadow-xl",onClick:function(){p(!0),f(e)},children:[Object(J.jsxs)("div",{className:"flex justify-between items-start",children:[Object(J.jsxs)("div",{className:"flex items-center",children:[Object(J.jsx)("div",{className:"w-6 h-6 mr-2",children:Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.1,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Object(J.jsx)("h3",{className:"text-lg",children:e.amount.toLocaleString()})]}),Object(J.jsx)("div",{children:e.collateralRequired&&Object(J.jsx)("p",{className:"text-red-400",children:"Collateral Required"})})]}),Object(J.jsx)("p",{className:"text-xs text-gray-400",children:e.type}),Object(J.jsxs)("div",{className:"mt-5",children:[Object(J.jsxs)("div",{className:"flex mt-3",children:[Object(J.jsx)("div",{className:"w-6 h-6 mr-3",title:"Term",children:Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),Object(J.jsx)("p",{children:e.termInDays})]}),Object(J.jsxs)("div",{className:"flex mt-3",children:[Object(J.jsx)("p",{className:"text-xl text-center w-6 h-6 mr-3",title:"Origination fee",children:"%"}),Object(J.jsxs)("p",{children:[Object(J.jsxs)("span",{children:[e.rate," "]}),Object(J.jsxs)("span",{className:"text-gray-400 text-sm",children:["(",e.amount*(e.rate/100)," ","credits)"]})]})]}),Object(J.jsxs)("p",{className:"mt-3 pt-3 text-sm border-t border-gray-700",children:["Total repayment cost:"," ",(e.amount+e.amount*(e.rate/100)).toLocaleString()," ","credits"]})]})]},e.amount+e.type+e.rate)}))]})]})},Ee=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(i.c)((function(e){return e.user})),c=r.loans,a=r.credits,l=Object(i.b)(),o=Object(n.useState)(),j=Object(b.a)(o,2),p=j[0],h=j[1],x=function(){var e=Object(d.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.replayLoan(r);case 3:n=e.sent,l(R(n.user.loans)),h({type:"Success",message:"Loan repayed successfully!"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h({type:"Error",message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h2",{className:"text-3xl mb-5",children:"Your Loans"}),p&&Object(J.jsxs)("div",{className:"flex justify-between items-center text-sm py-3 px-3 mb-5 ".concat("Success"===p.type?"bg-green-400 text-green-900":"bg-red-400 text-red-900"),children:[Object(J.jsx)("p",{children:p.message}),Object(J.jsx)("button",{className:"w-4 h-4 ".concat("Success"===p.type?"hover:text-green-700":"hover:text-red-700"),type:"button",onClick:function(){return h(void 0)},children:Object(J.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(J.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Object(J.jsx)("h3",{className:"text-lg mb-4",children:"Current Loans"}),Object(J.jsx)("div",{className:"grid grid-cols-4 gap-4",children:Object(ce.a)(c).filter((function(e){return e.status===O.Current})).length>0?Object(ce.a)(c).filter((function(e){return e.status===O.Current})).map((function(e){return Object(J.jsxs)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded text-left",children:[Object(J.jsxs)("div",{className:"mb-3",children:[Object(J.jsx)("p",{className:"text-xs text-gray-400",children:"Repayment Amount"}),Object(J.jsxs)("p",{children:[e.repaymentAmount.toLocaleString()," credits"]})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{className:"text-xs text-gray-400",children:"Due"}),Object(J.jsx)("p",{children:Object(ae.a)(new Date(e.due),{addSuffix:!0})})]}),a>e.repaymentAmount&&Object(J.jsx)("div",{className:"mt-3",children:Object(J.jsx)("button",{type:"button",className:"py-1 px-2 bg-blue-500 rounded hover:bg-blue-600",onClick:function(){return x(e.id)},children:"Repay"})})]},e.id)})):Object(J.jsx)("p",{className:"text-sm ml-4",children:"You have no open loans"})}),Object(J.jsx)("h3",{className:"text-lg my-4",children:"Closed Loans"}),Object(J.jsx)("div",{className:"grid grid-cols-4 gap-4",children:Object(ce.a)(c).filter((function(e){return e.status!==O.Current})).map((function(e){return Object(J.jsxs)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded text-left",children:[Object(J.jsxs)("div",{className:"mb-3",children:[Object(J.jsx)("p",{className:"text-xs text-gray-400",children:"Repayment Amount"}),Object(J.jsxs)("p",{children:[e.repaymentAmount.toLocaleString()," credits"]})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("p",{className:"text-xs text-gray-400",children:"Status"}),Object(J.jsx)("p",{children:(t=e.status,t.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" "))})]})]},e.id);var t}))})]})},Me=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(i.c)((function(e){return e})).marketData,c=Object(i.c)((function(e){return e.user})),a=c.credits,l=c.ships,o=c.loans,j=Object(n.useState)([]),p=Object(b.a)(j,2),h=p[0],x=p[1],m=Object(n.useState)([]),g=Object(b.a)(m,2),y=g[0],w=g[1],N=Object(n.useState)([]),k=Object(b.a)(N,2),S=k[0],C=k[1],L=Object(n.useState)(0),P=Object(b.a)(L,2),A=P[0],E=P[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.availableShips();case 3:r=e.sent,w(r.ships),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e=new Map(l.map((function(e){return[e.type,[]]}))),t=Array.from(e.entries(),(function(e){var t=Object(b.a)(e,1)[0];return{shipType:t,uniques:l.filter((function(e){return e.type===t})).length}}));x(t);var n=[];Object.values(f).forEach((function(e){var t={type:e,quantity:0,bestValue:0};l.filter((function(t){return t.cargo.find((function(t){return t.good===e}))})).forEach((function(r){var n;t.quantity+=null===(n=r.cargo.find((function(t){return t.good===e})))||void 0===n?void 0:n.quantity}));var s=r.filter((function(t){return t.planet.marketplace.find((function(t){return t.symbol===e}))})),c=null===s||void 0===s?void 0:s.map((function(t){var r;return null===(r=t.planet.marketplace.find((function(t){return t.symbol===e})))||void 0===r?void 0:r.sellPricePerUnit}));c.length>0?t.bestValue=Math.max.apply(Math,Object(ce.a)(c)):t.bestValue=0,n.push(t)})),C(n)}),[l]),Object(n.useEffect)((function(){var e=a;h.forEach((function(t){var r;e+=t.uniques*Math.round(.25*(null===(r=y.find((function(e){return e.type===t.shipType})))||void 0===r?void 0:r.purchaseLocations[0].price))})),S.forEach((function(t){e+=t.bestValue*t.quantity})),o.filter((function(e){return e.status===O.Current})).forEach((function(t){e-=t.repaymentAmount})),E(e)}),[a,h,S,o,y]),Object(J.jsx)(s.a.Fragment,{children:Object(J.jsxs)("table",{className:"table-auto w-3/4 mx-auto",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{className:"bg-gray-300 text-gray-700 uppercase text-sm leading-normal",children:[Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Commodity"}),Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Type"}),Object(J.jsx)("th",{className:"py-3 px-6 text-center",children:"Quantity"}),Object(J.jsx)("th",{className:"py-3 px-6 text-right",children:"Total Value"})]})}),Object(J.jsxs)("tbody",{className:"bg-gray-700 text-gray-200 text-sm font-light",children:[Object(J.jsxs)("tr",{className:"border-b border-gray-500 hover:bg-gray-900",children:[Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:"Credits"}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:"Cash"}),Object(J.jsx)("td",{className:"py-3 px-6 text-center whitespace-nowrap",children:"-"}),Object(J.jsx)("td",{className:"py-3 px-6 text-right whitespace-nowrap",children:a.toLocaleString()})]}),o.filter((function(e){return e.status===O.Current})).map((function(e){return Object(J.jsxs)("tr",{className:"border-b border-gray-500 hover:bg-gray-900",children:[Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:"Loan"}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:"Liability"}),Object(J.jsx)("td",{className:"py-3 px-6 text-center whitespace-nowrap",children:"-"}),Object(J.jsxs)("td",{className:"py-3 px-6 text-red-500 text-right whitespace-nowrap",children:["-",e.repaymentAmount.toLocaleString()]})]},e.id)})),h.map((function(e){var t;return Object(J.jsxs)("tr",{className:"border-b border-gray-500 hover:bg-gray-900",children:[Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.shipType}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:"Ship"}),Object(J.jsx)("td",{className:"py-3 px-6 text-center whitespace-nowrap",children:e.uniques.toLocaleString()}),Object(J.jsx)("td",{className:"py-3 px-6 text-right whitespace-nowrap",children:(e.uniques*Math.round(.25*(null===(t=y.find((function(t){return t.type===e.shipType})))||void 0===t?void 0:t.purchaseLocations[0].price))).toLocaleString()})]},e.shipType)})),S.map((function(e){return e.quantity>0?Object(J.jsxs)("tr",{className:"border-b border-gray-500 hover:bg-gray-900",children:[Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.type}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:"Cargo"}),Object(J.jsx)("td",{className:"py-3 px-6 text-center whitespace-nowrap",children:e.quantity.toLocaleString()}),Object(J.jsx)("td",{className:"py-3 px-6 text-right whitespace-nowrap",children:(e.bestValue*e.quantity).toLocaleString()})]},e.type):null}))]}),Object(J.jsx)("tfoot",{className:"bg-gray-700 text-gray-200 text-sm font-light",children:Object(J.jsxs)("tr",{className:"border-b border-gray-500 hover:bg-gray-900",children:[Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap uppercase",children:"Total"}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:"-"}),Object(J.jsx)("td",{className:"py-3 px-6 text-center whitespace-nowrap",children:"-"}),Object(J.jsx)("td",{className:"py-3 px-6 text-right whitespace-nowrap",children:A.toLocaleString()})]})})]})})},Be=function(){return Object(J.jsxs)("div",{children:[Object(J.jsxs)("div",{className:"text-sm mb-5",children:[Object(J.jsx)(l.c,{exact:!0,to:"/money",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Net Worth"}),Object(J.jsx)(l.c,{exact:!0,to:"/money/loans",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Your Loans"}),Object(J.jsx)(l.c,{exact:!0,to:"/money/loans/available",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Get a Loan"})]}),Object(J.jsxs)(j.c,{children:[Object(J.jsx)(j.a,{exact:!0,path:"/money",component:Me}),Object(J.jsx)(j.a,{exact:!0,path:"/money/loans",component:Ee}),Object(J.jsx)(j.a,{path:"/money/loans/available",component:Ae})]})]})},ze=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(i.c)((function(e){return e.user})).ships,c=Object(i.c)((function(e){return e.marketData})),a=Object(i.c)((function(e){return e.systems})),l=Object(i.c)((function(e){return e.automateAll})),o=Object(i.b)(),j=Object(n.useState)(),p=Object(b.a)(j,2),h=p[0],x=p[1],m=Object(n.useState)(Date.now()),O=Object(b.a)(m,2),g=O[0],y=O[1],w=Object(n.useState)(),N=Object(b.a)(w,2),k=N[0],S=N[1],C=function(){var e=Object(d.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(r),x(void 0),e.next=5,t.getLocations(r);case 5:n=e.sent.locations,x(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=11;break}return e.prev=1,e.next=4,t.systemsInfo();case 4:r=e.sent.systems,o(F(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}})()();var e=setInterval((function(){return y(Date.now())}),6e4);return function(){return clearInterval(e)}}),[]),Object(n.useEffect)((function(){0!==a.length&&C(a[0].symbol)}),[a]),Object(n.useEffect)((function(){l||function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===h||void 0===h||h.forEach(function(){var e=Object(d.a)(u.a.mark((function e(n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.some((function(e){return e.location===n.symbol}))){e.next=11;break}return e.prev=1,e.next=4,t.getMarket(n.symbol);case 4:s=e.sent,o(E({updatedAt:Date.now(),planet:s.location})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[h,r]);var L=function(e){return e.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},P=function(e){var t=c.find((function(t){return t.planet.symbol===e.symbol}));return t&&0!==(null===t||void 0===t?void 0:t.planet.marketplace.length)?null===t||void 0===t?void 0:t.planet.marketplace.slice().sort((function(e,t){return e.symbol>t.symbol?1:t.symbol>e.symbol?-1:0})).map((function(e){return Object(J.jsxs)("div",{className:"text-sm my-3",children:[Object(J.jsx)("p",{className:"font-bold",children:L(e.symbol)}),Object(J.jsxs)("p",{className:"pl-2",children:["Quantity: ",e.quantityAvailable.toLocaleString()]}),Object(J.jsxs)("p",{className:"pl-2",children:["Buy: ",e.purchasePricePerUnit.toLocaleString()," credits"]}),Object(J.jsxs)("p",{className:"pl-2",children:["Sell: ",e.sellPricePerUnit.toLocaleString()," credits"]})]},e.symbol+e.pricePerUnit+e.volumePerUnit)})):Object(J.jsx)("p",{className:"mt-3 text-sm text-gray-400",children:"No data available"})},A=function(e){var t=c.find((function(t){return t.planet.symbol===e.symbol}));return t?"Updated ".concat(Object(ae.a)(new Date(t.updatedAt),{addSuffix:!0})):null},M=function(e){return e?e.split("-")[0]:(console.log(e),"")},B=function(e,t){return Math.ceil(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)))},z=function(e,t){return Math.round(B(t,e)/4)+1};return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h2",{className:"text-3xl mb-5",children:"Markets"}),Object(J.jsxs)("div",{className:"my-7",children:[Object(J.jsx)("h3",{children:"Best Routes"}),Object(J.jsx)("div",{className:"flex mt-2",children:function(){for(var e=[],t=Array.from(new Set(c.map((function(e){return e.planet.symbol})))),r=Array.from(new Set(t.map((function(e){return M(e)})))),n=function(){for(var t=a[s],r=[],n=function(){var e=l[i];if(e===f.Research||e===f.Fuel)return"continue";var n=Object(ce.a)(c).filter((function(r){return M(r.planet.symbol)===t&&r.planet.marketplace.find((function(t){return t.symbol===e}))}));if(n.length<=1)return"continue";for(var s=0;s<n.length;s+=1)for(var a=n[s],o=0;o<n.length;o+=1)if(n[o].planet!==a.planet){var u,d,b,j=((null===(u=n[o].planet.marketplace.find((function(t){return t.symbol===e})))||void 0===u?void 0:u.sellPricePerUnit)-(null===(d=a.planet.marketplace.find((function(t){return t.symbol===e})))||void 0===d?void 0:d.purchasePricePerUnit))/B(a.planet,n[o].planet)/(null===(b=a.planet.marketplace.find((function(t){return t.symbol===e})))||void 0===b?void 0:b.volumePerUnit),p=a.updatedAt>n[o].updatedAt?a.updatedAt:n[o].updatedAt;if(j<=0)continue;var h=r.find((function(t){return t.good===e}));h&&h.cpdv<j?r[r.findIndex((function(t){return t.good===e}))]={good:e,from:a.planet.symbol,to:n[o].planet.symbol,fuelRequired:z(a.planet,n[o].planet),cpdv:j,lastUpdated:p}:h||r.push({good:e,from:a.planet.symbol,to:n[o].planet.symbol,fuelRequired:z(a.planet,n[o].planet),cpdv:j,lastUpdated:p})}},i=0,l=Object.values(f);i<l.length;i++)n();e.push({system:t,routes:r.sort((function(e,t){return e.cpdv<t.cpdv?1:t.cpdv<e.cpdv?-1:0}))})},s=0,a=r;s<a.length;s++)n();return e}().map((function(e){var t;return Object(J.jsxs)("div",{className:"w-1/2 mx-6",children:[Object(J.jsx)("h4",{className:"text-lg",children:null===(t=a.find((function(t){return t.symbol===e.system})))||void 0===t?void 0:t.name}),Object(J.jsxs)("table",{className:"w-full text-sm",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{className:"border-b border-gray-500 text-sm leading-normal",children:[Object(J.jsx)("th",{className:"font-normal text-gray-400 text-left",children:"Good"}),Object(J.jsx)("th",{className:"font-normal text-gray-400 text-left",children:"From"}),Object(J.jsx)("th",{className:"font-normal text-gray-400 text-left",children:"To"}),Object(J.jsx)("th",{className:"font-normal text-gray-400 text-left",children:"Credits per distance volume"})]})}),Object(J.jsx)("tbody",{children:e.routes.map((function(e){var t,r,n,s;return Object(J.jsxs)("tr",{className:"border-b border-gray-500 hover:bg-gray-900",children:[Object(J.jsx)("td",{className:"py-1",children:L(e.good)}),Object(J.jsx)("td",{className:"py-1",children:null===(t=a.find((function(t){return t.symbol===M(e.from)})))||void 0===t||null===(r=t.locations.find((function(t){return t.symbol===e.from})))||void 0===r?void 0:r.name}),Object(J.jsx)("td",{className:"py-1",children:null===(n=a.find((function(t){return t.symbol===M(e.to)})))||void 0===n||null===(s=n.locations.find((function(t){return t.symbol===e.to})))||void 0===s?void 0:s.name}),Object(J.jsx)("td",{className:"py-1",children:Math.ceil(100*e.cpdv)/100})]},e.good+e.from+e.to+e.cpdv)}))})]},e.system)]})}))})]}),Object(J.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"System"}),a.map((function(e){return Object(J.jsx)("button",{type:"button",className:"text-sm mr-4 pb-1 mb-5 ".concat(k===e.symbol?"subMenuActive":""),value:e.symbol,onClick:function(e){return C(e.currentTarget.value)},children:e.name},e.symbol)})),Object(J.jsx)("div",{className:"grid grid-cols-4 gap-4",children:h?h.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})).map((function(e){return Object(J.jsxs)("div",{className:"p-3 bg-gray-900 border border-gray-700 rounded",children:[Object(J.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-gray-700",children:[Object(J.jsx)("h3",{className:"text-xl",children:e.name}),Object(J.jsx)("p",{className:"text-xs text-gray-400",children:g&&A(e)})]}),P(e)]},e.symbol)})):Object(J.jsx)($,{})})]})},Ie=r(30),Fe=function(){var e=Object(i.c)((function(e){return e.user})).credits,t=Object(n.useContext)(re),r=Object(b.a)(t,1)[0],c=Object(n.useState)([]),a=Object(b.a)(c,2),l=a[0],o=a[1],j=Object(n.useState)([]),p=Object(b.a)(j,2),h=p[0],x=p[1],m=Object(n.useState)(),f=Object(b.a)(m,2),O=f[0],v=f[1],g=Object(n.useState)(),y=Object(b.a)(g,2),w=y[0],N=y[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,r.getStructures();case 3:e.t1=e.sent.structures,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var k=function(e){return e.toLowerCase().split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},S=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,s,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t),N(void 0),x([]),n=[],s=Object(Ie.a)(t.allowedLocationTypes),e.prev=5,s.s();case 7:if((c=s.n()).done){e.next=15;break}return a=c.value,e.next=11,r.getLocationsForStructure(a);case 11:e.sent.locations.forEach((function(e){return n.push(e)}));case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),s.e(e.t0);case 20:return e.prev=20,s.f(),e.finish(20);case 23:x(n);case 24:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h2",{className:"text-3xl mb-5",children:"Available Structures"}),Object(J.jsx)("h3",{className:"text-lg mt-5 mb-3",children:"1. Select a structure..."}),Object(J.jsxs)("table",{className:"mt-3 table-auto w-full mx-auto",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{className:"bg-gray-300 text-gray-700 uppercase text-sm leading-normal",children:[Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Type"}),Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Price"}),Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Allowed Locations"}),Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Consumes"}),Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Produces"})]})}),Object(J.jsx)("tbody",{className:"bg-gray-700 text-gray-200 text-sm font-light",children:l.map((function(e){return Object(J.jsxs)("tr",{className:"cursor-pointer border-b border-gray-500 hover:bg-gray-900 ".concat((null===O||void 0===O?void 0:O.name)===e.name?"bg-yellow-600 text-gray-100":""),onClick:function(){return S(e)},children:[Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.name}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.price.toLocaleString()}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.allowedLocationTypes.map((function(e){return k(e)})).join(", ")}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.consumes.map((function(e){return k(e)})).join(", ")}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.produces.map((function(e){return k(e)})).join(", ")})]},e.name+e.price)}))})]}),O&&Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h3",{className:"text-lg mt-10 mb-3",children:"2. Select a location..."}),Object(J.jsxs)("table",{className:"mt-3 table-auto w-full mx-auto",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{className:"bg-gray-300 text-gray-700 uppercase text-sm leading-normal",children:[Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Name"}),Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Type"}),Object(J.jsx)("th",{className:"py-3 px-6 text-left",children:"Symbol"})]})}),Object(J.jsx)("tbody",{className:"bg-gray-700 text-gray-200 text-sm font-light",children:h.map((function(e){return Object(J.jsxs)("tr",{className:"cursor-pointer border-b border-gray-500 hover:bg-gray-900 ".concat((null===w||void 0===w?void 0:w.symbol)===e.symbol?"bg-yellow-600 text-gray-100":""),onClick:function(){return N(e)},children:[Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.name}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:k(e.type)}),Object(J.jsx)("td",{className:"py-3 px-6 text-left whitespace-nowrap",children:e.symbol})]},e.symbol)}))})]})]}),w&&O&&Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h3",{className:"text-lg mt-10 mb-3",children:"3. Confirm build"}),Object(J.jsxs)("table",{className:"mb-3",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{className:"pr-10 font-normal text-gray-400 text-left",children:"Structure"}),Object(J.jsx)("th",{className:"pr-8 font-normal text-gray-400 text-left",children:"Location"}),Object(J.jsx)("th",{className:"pr-8 font-normal text-gray-400 text-left",children:"Cost"})]})}),Object(J.jsx)("tbody",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:O.name}),Object(J.jsx)("td",{children:w.name}),Object(J.jsx)("td",{children:O.price.toLocaleString()})]})})]}),Object(J.jsx)("button",{type:"button",className:"bg-green-600 px-3 py-1 rounded hover:bg-green-700 disabled:opacity-50 disabled:bg-green-600 disabled:cursor-default",disabled:e<O.price,children:"Build"})]})]})},Re=function(){var e=Object(n.useContext)(re),t=Object(b.a)(e,1)[0],r=Object(i.c)((function(e){return e.user})).username,c=Object(n.useState)([]),a=Object(b.a)(c,2),l=a[0],o=a[1];return Object(n.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.systemsInfo();case 2:n=e.sent.systems,s=[],n.forEach((function(e){e.locations.forEach((function(e){var t;null===(t=e.structures)||void 0===t||t.forEach((function(e){e.ownedBy&&e.ownedBy.username===r&&s.push(e)}))}))})),o(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)("h2",{className:"text-3xl mb-5",children:"Your Structures"}),l.length>0?Object(J.jsx)("div",{children:"Your Structures"}):Object(J.jsx)("p",{children:"You have no structures"})]})},Ue=function(){return Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsxs)("div",{className:"text-sm mb-5",children:[Object(J.jsx)(l.c,{exact:!0,to:"/structures",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Structures"}),Object(J.jsx)(l.c,{exact:!0,to:"/structures/build",className:"mr-4 pb-1",activeClassName:"subMenuActive",children:"Build"})]}),Object(J.jsx)("div",{className:"h-1/4",children:Object(J.jsxs)(j.c,{children:[Object(J.jsx)(j.a,{exact:!0,path:"/structures",component:Re}),Object(J.jsx)(j.a,{exact:!0,path:"/structures/build",component:Fe})]})})]})};!function(e){e[e.Buy=0]="Buy",e[e.Sell=1]="Sell",e[e.CreateFlightPlan=2]="CreateFlightPlan",e[e.MarketData=3]="MarketData",e[e.BuyShip=4]="BuyShip",e[e.RemoveFlightPlan=5]="RemoveFlightPlan",e[e.GetFlightPlan=6]="GetFlightPlan",e[e.UpdateShip=7]="UpdateShip"}(he||(he={}));var Te=function(){var e=Object(i.c)((function(e){return e})),t=e.account,r=e.user,c=e.automateAll,a=e.flightPlans,l=Object(n.useState)(),o=Object(b.a)(l,2),x=o[0],m=o[1],f=Object(i.b)(),O=Object(n.useContext)(re),g=Object(b.a)(O,1)[0];Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t,r,n,s,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.getUser();case 3:if(t=e.sent,f(k(t)),!t.user.ships.some((function(e){return void 0===e.location}))){e.next=11;break}return e.next=8,g.ownedShips();case 8:r=e.sent,r.ships.forEach(function(){var e=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.flightPlanId){e.next=6;break}return e.next=3,g.queryFlightPlan(t.flightPlanId);case 3:r=e.sent,null===(n=r.flightPlan).terminatedAt&&f(P(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:(function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.systemsInfo();case 2:t=e.sent.systems,f(F(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),n=localStorage.getItem("marketData"),null===(s=null!==n?JSON.parse(n):null)||void 0===s||s.map((function(e){return f(E(e))})),c=localStorage.getItem("spyShips"),null===(a=null!==c?JSON.parse(c):null)||void 0===a||a.map((function(e){return f(V(e))})),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),"Invalid username or token."===e.t0.message&&(f(M()),localStorage.removeItem("apiKey"));case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.availableShips();case 3:(t=e.sent).ships.sort((function(e,t){return e.type>t.type?1:t.type>e.type?-1:0})),f(q(t.ships)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),v.b.error(e.t0.message,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();t.username&&t.token&&(e(),r())}),[]);var y=function(e){console.log(e),v.b.error(e,{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:0}),f(U(!1))},w=function(){var e=Object(d.a)(u.a.mark((function e(t,r){var n,s,c,a,i,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===he.Buy?3:e.t0===he.Sell?10:e.t0===he.CreateFlightPlan?17:e.t0===he.RemoveFlightPlan?22:e.t0===he.GetFlightPlan?24:e.t0===he.MarketData?28:e.t0===he.BuyShip?33:e.t0===he.UpdateShip?39:44;break;case 3:return e.next=5,g.purchaseOrder(r.shipId,r.good,r.quantity);case 5:return n=e.sent,f(C(n.credits)),f(L(n.ship)),f(T(n)),e.abrupt("return",n);case 10:return e.next=12,g.sellOrder(r.shipId,r.good,r.quantity);case 12:return s=e.sent,f(C(s.credits)),f(L(s.ship)),f(D(s)),e.abrupt("return",s);case 17:return e.next=19,g.createFlightPlan(r.shipId,r.to);case 19:return c=e.sent,f(P(c.flightPlan)),e.abrupt("return",c);case 22:return f(A(r.flightPlan)),e.abrupt("return",null);case 24:return e.next=26,g.queryFlightPlan(r.shipId);case 26:return a=e.sent,e.abrupt("return",a);case 28:return e.next=30,g.getMarket(r.location);case 30:return i=e.sent,f(E({updatedAt:Date.now(),planet:i.location})),e.abrupt("return",i);case 33:return e.next=35,g.buyShip(r.location,r.shipId);case 35:return l=e.sent,f(C(l.credits)),f(z(l.ship)),e.abrupt("return",l);case 39:return e.next=41,g.shipInfo(r.shipId);case 41:return o=e.sent,f(L(o.ship)),e.abrupt("return",o.ship);case 44:return e.abrupt("return",null);case 45:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.getState());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x&&x[0].updateState(G.getState())}),[r.ships.length,a]),Object(n.useEffect)((function(){var e;(x||function(){var e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.b(new h),e.next=3,new t(p.a(N),p.a(w),p.a(y));case 3:r=e.sent,m([r]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),x)&&(c?x[0].start():null===(e=x[0])||void 0===e||e.stop())}),[c]),Object(J.jsx)(s.a.Fragment,{children:void 0===t.token||null===t.token||0===t.token.length||void 0===t.username||null===t.username||0===t.username.length?Object(J.jsx)(se,{}):Object(J.jsxs)(s.a.Fragment,{children:[Object(J.jsx)(ee,{}),Object(J.jsx)(v.a,{}),Object(J.jsx)("div",{className:"bg-gray-800 py-4 flex-grow text-gray-200",children:Object(J.jsx)("div",{className:"container min-h-full mx-auto",children:Object(J.jsxs)(j.c,{children:[Object(J.jsx)(j.a,{exact:!0,path:"/",component:me}),Object(J.jsx)(j.a,{path:"/ships",component:ke}),Object(J.jsx)(j.a,{path:"/money",component:Be}),Object(J.jsx)(j.a,{path:"/markets",component:ze}),Object(J.jsx)(j.a,{path:"/structures",component:Ue}),Object(J.jsx)(j.a,{path:"/systems/:location",component:Le}),Object(J.jsx)(n.Suspense,{fallback:Object(J.jsx)("div",{}),children:Object(J.jsx)(j.a,{exact:!0,path:"/systems",component:Ce})})]})})})]})})};a.a.render(Object(J.jsx)(s.a.StrictMode,{children:Object(J.jsx)(i.a,{store:G,children:Object(J.jsx)(l.a,{basename:"/Vocivos",children:Object(J.jsx)(ne,{children:Object(J.jsx)(Te,{})})})})}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.0fd06442.chunk.js.map